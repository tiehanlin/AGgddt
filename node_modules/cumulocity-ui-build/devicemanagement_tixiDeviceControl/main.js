/* devicemanagement_tixiDeviceControl 8.7.2 2017-08-02T09:53:40+00:00 2e289fd803cb (hotfix/8.7.2) tip */
!function(){"use strict";function e(e,t){function n(e){return e({templateUrl:"devicemanagement_tixiDeviceControl/pollFrequencyOperationSettings.html",controller:["$scope","$uibModalInstance",function(e,t){function n(){t.close(i)}var s={type:"object",properties:{frequency:{type:"number",title:"Frequency (seconds)",required:!0},duration:{type:"number",title:"Duration (minutes)",required:!0}}},i={frequency:10,duration:10};e.schema=s,e.params=i,e.getMeasurements=n,e.dismiss=t.dismiss}]})}function s(e,t){c.createWithNotifications(e).then(function(e){e.created.then(function(){m.success(t.createdMessage)}),e.completed.then(function(e){e.status===c.status.SUCCESSFUL?m.success(t.successfulMessage):e.status===c.status.FAILED&&(e.failureReason?m.danger(d.getString(t.failureMessageWithReason,e)):m.danger(t.failureMessage))})})}function i(e){o.detailCached(e).then(r.getResData).then(function(e){_.forEach(g,function(t,n){o.supportsOperation(e,n)&&l.addAction(t())})})}var a,r,o,c,u,l,m,d,f="/device/:deviceId",g={c8y_MeasurementRequestOperation:function(){return{text:t("Get measurements"),action:function(){var e={deviceId:a.deviceId,description:t("Get measurements"),c8y_MeasurementRequestOperation:{requestName:"LOG"}};s(e,{createdMessage:t("Getting measurements from device..."),successfulMessage:t("Got measurements from device."),failureMessage:t("Could not get measurements from device!"),failureMessageWithReason:t('Could not get measurements from device because of "{{failureReason}}"!')})},priority:5e3}},c8y_MeasurementPollFrequencyOperation:function(){return{text:t("Initiate measurement poll"),action:function(){return n(u).then(function(e){return{deviceId:a.deviceId,description:t("Initiate measurement poll"),c8y_MeasurementPollFrequencyOperation:{frequency:e.frequency,duration:e.duration}}}).then(function(e){return s(e,{createdMessage:t("Initiating measurement poll..."),successfulMessage:t("Initiated measurement poll."),failureMessage:t("Could not initiate measurement poll!"),failureMessageWithReason:t('Could not initiate measurement poll because of "{{failureReason}}"!')})})},priority:5e3}}};e.when(f,{showIf:["$routeParams","c8yBase","c8yDevices","c8yDeviceControl","c8yModal","c8yActions","c8yAlert","gettextCatalog",function(e,t,n,s,f,g,p,v){return a=e,r=t,o=n,c=s,u=f,l=g,m=p,d=v,i(a.deviceId),!1}]})}angular.module("c8y.tixiDeviceControl",[]).config(["c8yViewsProvider","gettext",e])}(),function(){"use strict";function e(e){var t;t='<div>\n  <div class="modal-header">\n    <h3 translate>Get measurements</h3>\n  </div>\n\n  <div class="modal-body">\n    <c8y-schema-form schema="schema" model="params"></c8y-schema-form>\n  </div>\n\n  <div class="modal-footer">\n    <button class="btn btn-primary" ng-click="getMeasurements()" ng-disabled="getMeasurementsForm.$invalid" translate>Get measurements</button>\n    <button class="btn btn-default" ng-click="dismiss()" translate>Cancel</button>\n  </div>\n</div>\n',e.put("devicemanagement_tixiDeviceControl/pollFrequencyOperationSettings.html",t),e.put("/apps/devicemanagement/tixiDeviceControl/pollFrequencyOperationSettings.html",t)}angular.module("c8y.tixiDeviceControl").run(["$templateCache",e])}();