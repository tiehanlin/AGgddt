/* administration_password 8.7.2 2017-08-02T09:53:14+00:00 79d3e7d78638 (hotfix/8.7.2) tip */
angular.module("c8y.parts.password",[]).config(["c8yNavigatorProvider","c8yViewsProvider","gettext",function(t,n,e){"use strict";t.addNavigation({parent:e("Settings"),name:e("Password"),path:"password",icon:"shield",priority:2e3}),n.when("/password",{templateUrl:"administration_password/views/index.html"})}]),angular.module("c8y.parts.password").controller("passwordCtrl",["$scope","c8yTitle","c8ySettings","$q","c8yAlert","gettext",function(t,n,e,a,i,s){"use strict";function l(){n.changeTitle({title:s("Password")})}function r(n){var e=n.key,a=e.replace(/\./g,"_"),i=JSON.parse(n.value);t[a]=n,t[a].value=i,e==="system."+y&&i&&(t.validityLimitEnforced=h=!0,t.limit_validity={value:i})}function o(t){return e.detail({category:v,key:t}).then(function(t){return t.data}).then(r)}function d(t){return e.getSystemOption({category:v,key:t}).then(function(t){return t.data}).then(function(t){r(_.assign({},t,{key:"system."+t.key}))})}function c(){return a.all([h?a.when():e.updateOption(t.limit_validity),e.updateOption(t.strength_validity)]).then(function(){h||o(m),o(g),d(f),i.success(s("Password settings updated successfully!"))})}function u(t){p(isNaN(t)||parseInt(t,10)<0?t=t.slice(0,-1):t),t.length||p(0)}function p(n){t.limit_validity.value=parseInt(n)}var v="password",m="limit.validity",y="limit.validity",g="strength.validity",f="enforce.strength",h=!1;t.update=c,t.validateDays=u,t.validityLimitEnforced=h,l(),o(m).then(d(y)),o(g),d(f)}]),function(){"use strict";function t(t){var n;n='<div data-ng-controller="passwordCtrl">\n  <div class="col-lg-6">\n    <form class="form-horizontal" name="passwordValidForm" data-ng-submit="update()" novalidate>\n      <div class="row">\n        <p class="form-control-static pull-left">{{\'Limit validity for\' | translate}}:</p>\n        <div class="col-xs-2">\n          <input type="text" class="form-control text-right" maxlength="6" ng-model="limit_validity.value" ng-change="validateDays(limit_validity.value)" ng-disabled="validityLimitEnforced">\n        </div>\n        <p class="form-control-static pull-left" translate> days</p>\n        <a class="pull-left btn btn-link" uib-popover="{{\'default 0 = unlimited validity\' | translate}}" popover-placement="bottom" popover-trigger="mouseenter">\n          <i c8y-icon="question-circle" class="fa fw fa-question-circle"></i>\n        </a>\n      </div>\n\n      <div class="form-group">\n        <div class="checkbox">\n          <label>\n            <input type="checkbox" ng-model="strength_validity.value" ng-checked="system_enforce_strength.value || strength_validity.value" ng-disabled="system_enforce_strength.value">\n            <translate>Enforce that all passwords are "strong" (green)</translate>\n          </label>\n        </div>\n      </div>\n\n      <div class="form-group">\n        <button type="submit" class="btn btn-primary" ng-disabled="passwordValidForm.$invalid" translate>Save</button>\n      </div>\n    </form>\n    <c8y-tfa-settings></c8y-tfa-settings>\n  </div>\n</div>\n',t.put("administration_password/views/index.html",n),t.put("/apps/administration/password/views/index.html",n)}angular.module("c8y.parts.password").run(["$templateCache",t])}();