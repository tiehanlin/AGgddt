/* core_propertiesLibrary 8.7.2 2017-08-02T09:55:11+00:00 e22b35b1d531 (hotfix/8.7.2) tip */
!function(){"use strict";function e(e,n,t,c){function r(e){var n=function(n){n.filters={appliesTo:e}};return n.$inject=["$scope"],n}var s="properties-library",o=c("Properties library"),a={parent:c("Settings"),name:o,path:s,icon:"book",priority:1e3},i="/"+s,l='<c8y-json-schema-objects-list filters="filters"></c8y-json-schema-objects-list>',m=[{name:c("Inventory"),icon:"cubes",template:l,controller:r({MANAGED_OBJECTS:!0}),priority:4e3},{name:c("Alarm"),icon:"bell",template:l,controller:r({ALARMS:!0}),priority:3e3},{name:c("Event"),icon:"rss",template:l,controller:r({EVENTS:!0}),priority:2e3},{name:c("Tenant"),icon:"server",template:l,controller:r({TENANTS:!0}),priority:1e3,showIfPermissions:{anyRole:["ROLE_TENANT_MANAGEMENT_READ"]}}];e.addNavigation(a),n.addTitle(i,{data:_.constant({title:o})}),_.forEach(m,function(e){t.when(i,e)})}e.$inject=["c8yNavigatorProvider","c8yTitleProvider","c8yViewsProvider","gettext"],angular.module("c8y.propertiesLibrary",[]).config(e)}(),function(){"use strict";function e(e,n,t){function c(){r()}function r(){return b.jsonSchemaObjects=[],e.list().then(s).then(function(e){b.jsonSchemaObjects=e})}function s(e){return _.filter(e,b.filters)}function o(e){b.selected=e}function a(){b.selected=void 0}function i(){o(_.assign(e.getDefaults(),b.filters))}function l(c){return e.save(c).then(a).then(r).then(_.partial(n.success,t("Property saved!")))}function m(c){return e.remove(c).then(a).then(r).then(_.partial(n.success,t("Property removed!")))}var b=this;_.assign(b,{$onInit:c,select:o,deselect:a,newJsonSchemaObject:i,save:l,remove:m})}e.$inject=["c8yJsonSchemas","c8yAlert","gettext"],angular.module("c8y.propertiesLibrary").component("c8yJsonSchemaObjectsList",{bindings:{filters:"<"},templateUrl:"core_propertiesLibrary/jsonSchemaObjectsList.html",controller:e,controllerAs:"vm"})}(),function(){"use strict";function e(){function e(e){e._jsonSchemaObject&&(s.jsonSchemaObject=_.cloneDeep(s._jsonSchemaObject))}function n(e){if(s.jsonSchemaObject){var n=_.first(_.keys(e.properties)),t=_.get(e,["properties",n,"title"],"");_.set(s.jsonSchemaObject,"name",t),_.assign(s.jsonSchemaObject.c8y_JsonSchema,e)}}function t(){s.onSave({jsonSchemaObject:s.jsonSchemaObject,originalJsonSchemaObject:s._jsonSchemaObject})}function c(){s.onRemove({jsonSchemaObject:s.jsonSchemaObject})}function r(){s.onCancel()}var s=this;_.assign(s,{$onChanges:e,onSchemaChange:n,save:t,remove:c,cancel:r})}angular.module("c8y.propertiesLibrary").component("c8yJsonSchemaObjectEditor",{bindings:{_jsonSchemaObject:"<jsonSchemaObject",onSave:"&",onRemove:"&",onCancel:"&"},templateUrl:"core_propertiesLibrary/jsonSchemaObjectEditor.html",controller:e,controllerAs:"vm"})}(),function(){"use strict";function e(e){var n;n='<form name="jsonSchemaObjectForm" novalidate>\n  <c8y-schema-editor schema="vm.jsonSchemaObject.c8y_JsonSchema" on-change="vm.onSchemaChange(schema)">\n  </c8y-schema-editor>\n\n  <div class="text-center">\n    <hr>\n    <button class="btn btn-primary" ng-click="vm.save()" ng-disabled="jsonSchemaObjectForm.$invalid" translate>\n      Save\n    </button>\n    &nbsp;\n    <button class="btn btn-default" ng-if="!vm.jsonSchemaObject.id" ng-click="vm.cancel()" translate>\n      Cancel\n    </button>\n    &nbsp;\n    <button class="btn btn-danger" ng-if="vm.jsonSchemaObject.id" ng-click="vm.remove()" translate>\n      Remove\n    </button>\n  </div>\n</form>\n',e.put("core_propertiesLibrary/jsonSchemaObjectEditor.html",n),e.put("/apps/core/propertiesLibrary/jsonSchemaObjectEditor.html",n),n='<div>\r\n  <div class="card-group smart-rest-editor">\r\n    <div class="col-md-4 col-xs-12">\r\n\r\n      <ul class="nav c8y-nav-stacked">\r\n        <li ng-if="vm.jsonSchemaObjects.length">\r\n          <ul style="margin: 0; padding: 0">\r\n            <li class="c8y-stacked-item" ng-repeat="jsonSchemaObject in vm.jsonSchemaObjects | orderBy:\'name\'" ng-click="vm.select(jsonSchemaObject)" ng-class="{active: vm.selected === jsonSchemaObject}">\r\n              <span class="text-truncate">\r\n                <span ng-bind="jsonSchemaObject.name"></span>\r\n              </span>\r\n            </li>\r\n          </ul>\r\n        </li>\r\n        <li ng-show="vm.jsonSchemaObjects.length === 0">\r\n          <div class="alert alert-info" translate>\r\n            No properties. Click below to add the first one.\r\n          </div>\r\n        </li>\r\n        <li style="margin-top: 10px">\r\n          <button class="btn-add-block" ng-click="vm.newJsonSchemaObject()">\r\n            <i c8y-icon="plus-square"></i> <translate>Add property</translate>\r\n          </button>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n\r\n    <div class="col-md-8 col-xs-12" ng-show="vm.selected">\r\n      <div class="c8y-smart-rest-tab">\r\n        <button class="close visible-sm visible-xs" ng-click="vm.deselect()">\r\n          <span translate>Close</span> &times;\r\n        </button>\r\n        <div class="clearfix"></div>\r\n        <c8y-json-schema-object-editor json-schema-object="vm.selected" on-save="vm.save(jsonSchemaObject)" on-cancel="vm.deselect()" on-remove="vm.remove(jsonSchemaObject)">\r\n        </c8y-json-schema-object-editor>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n',e.put("core_propertiesLibrary/jsonSchemaObjectsList.html",n),e.put("/apps/core/propertiesLibrary/jsonSchemaObjectsList.html",n)}angular.module("c8y.propertiesLibrary").run(["$templateCache",e])}();