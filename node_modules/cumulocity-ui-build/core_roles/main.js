/* core_roles 8.7.2 2017-08-02T09:55:15+00:00 e22b35b1d531 (hotfix/8.7.2) tip */
!function(){"use strict";function e(e){e.init()}e.$inject=["c8yRolesUiProvider"],angular.module("c8y.roles",[]).config(e)}(),function(){"use strict";function e(e,n,t){function s(){n.when("/"+r,m),n.when("/"+l,_.assign(p,v)),n.when("/"+c,_.assign(u,v))}function o(){t.addNavigation({name:e("Roles"),parent:e("Accounts"),priority:5e3,path:r,icon:d,showIfPermissions:{anyRole:f}})}function i(){s(),o()}function a(n,t,s,o,i,a,d,m,p,u,v,h){function f(){a.changeTitle({title:e("Roles")})}function b(){t.path("/"+r),t.search("duplicate",null)}function R(e){var n=p.isGlobal(e)?l:c;return S(e,n)}function S(e,n){var s=i.getId(e),o=n.replace(/:\w+/,s);return t.search("duplicate",null),t.path(o)}function E(e,n){var s="global"===e?l:c,o=s.replace(/:\w+/,"new");t.path(o),n&&t.search("duplicate",n)}function T(e){var n=p.isGlobal(e)?"global":"inventory";E(n,e.id)}function I(t){var i={title:e("Confirm delete?"),body:o.getString('Do you really want to remove role "{{name}}"?',t),status:"danger"},a=d(i),r=_.partial(p.remove,t),l=_.partial(p.global.remove,t),c=p.isGlobal(t)?l:r,v=_.partial(_.unary(m.success),e("Role removed.")),g=_.partial(_.unary(m.warning),e("Role cannot be deleted because it is assigned to users.")),h=function(e){var n=_.get(e,"status");return n&&(422===n?g():y(e)),s.reject(e)},y=function(e){var t=_.get(e,"data",e);n.$emit("alert",{type:"danger",text:$("<div/>").text(u.getTranslatedServerMessage(t.message)).html(),detailedData:t})};return a.then(c).then(v).catch(h)}function A(e){var n=s.when({name:o.getString("New role"),permissions:[]});return e&&(n=p.detail(e).then(function(e){var n=e.data,t={};return t.name=n.name+" 2",t.permissions=_.map(n.permissions,function(e){return _.omit(e,["id"])}),t})),n}function N(n){var t=function(){return m.success(e("Inventory role saved successfully"))},o=s.when();return n.id||(o=w(n,n.name).catch(x(n.name))),o.then(_.partial(p.save,n)).then(t).then(b)}function w(e,n){return p.list().then(function(t){return P(t,e,n)})}function P(e,n,t){var o=_.filter(e,function(e){return e.id!==n.id});return _.some(o,{name:t})&&s.reject({duplicate:!0})}function C(e,n){return w(e,n).then(function(){var t;return e.id?t=p.update({id:e.id,name:n}).then(function(t){return e.name=n,t}):e.name=n,t},x(n))}function x(e){return function(n){return _.get(n,"duplicate")&&m.danger(o.getString('There is already a role with the name "{{name}}"',{name:e})),s.reject()}}function k(e){var n=s.when({name:o.getString("New role")});return e&&(n=p.global.detail(e).then(function(e){var n=_.pick(e.data,["name","roles","applications"]);return n.name+=" 2",n})),n}function O(t,o){var i=_.reduce(o,function(e,n,t){return n&&e.push(t),e},[]),a=function(){var s=n.$new(!0);return s.role=t,d({templateUrl:"core_roles/detail/roleGlobalSaveConfirm.html",title:e("Confirm saving changes?"),scope:s})},r=function(){var e=s.when();return t.id||(e=G(t,t.name).catch(x(t.name))),e.then(_.partial(p.global.save,t))},l=function(e){return p.global.updateRoles(e,i)},c=function(){return m.success(e("Global role saved successfully"))},u=t.id?a():s.when();return u.then(r).then(l).then(c).then(b)}function G(e,n){return p.global.list().then(function(t){return P(t,e,n)})}function D(e,n){return G(e,n).then(function(){var t=s.when();return e.id?t=p.global.update({id:e.id,name:n}).then(function(t){return e.name=n,t}):e.name=n,t},x(n))}function L(){return v.listGlobal().then(function(e){return _.filter(e,function(e){return _.includes(g,e.access)})})}function U(){return v.hasAnyRole([y])}function M(e){return p.isGlobal(e)&&("admins"===_.lowerCase(e.name)||"devices"===_.lowerCase(e.name)||v.hasRole(e,"ROLE_NO_DELETE"))}return{ROUTE_LIST:r,STRINGS:h,listGlobalPermissions:L,list:b,setListTitle:f,add:E,edit:R,duplicate:T,removeAfterConfirmation:I,canCreate:U,newInventoryRole:A,saveInventoryRole:N,saveInventoryRoleName:C,newGlobalRole:k,saveGlobalRole:O,saveGlobalRoleName:D,isUndeletable:M}}a.$inject=["$rootScope","$location","$q","gettextCatalog","c8yBase","c8yTitle","c8yModal","c8yAlert","c8yRoles","c8yLocales","c8yPermissions","c8yRolesUiStrings"];var r="roles",l=r+"/global/:roleId",c=r+"/inventory/:roleId",d="c8y-users",m={template:"<c8y-roles-overview></c8y-roles-overview>"},p={template:'<c8y-role-detail-global id="vm.params.roleId" duplicate-id="vm.params.duplicate"></c8y-role-global-global>'},u={template:'<c8y-role-detail-inventory id="vm.params.roleId" duplicate-id="vm.params.duplicate" is-top-tenant="vm.isTopTenant"></c8y-role-detail-inventory>'},v={controllerAs:"vm",controller:["$routeParams","c8yTenant",function(e,n){var t=this;_.assign(t,{isTopTenant:!1,params:e}),n.isCurrentUserTopTenant().then(function(e){t.isTopTenant=e})}]},g=["READ","ADMIN","CREATE","UPDATE"],h="ROLE_USER_MANAGEMENT_READ",y="ROLE_USER_MANAGEMENT_ADMIN",f=[h,y];return{$get:a,init:i,hookViews:s}}e.$inject=["gettext","c8yViewsProvider","c8yNavigatorProvider"],angular.module("c8y.roles").provider("c8yRolesUi",e)}(),function(){"use strict";var e={};angular.module("c8y.roles").constant("c8yRolesUiStrings",e);var n=_.identity,t=e.PERMISSIONS_SCOPES={},s=e.PERMISSIONS_GLOBAL={},o=e.LINKS={};e.ADMIN=n("Allows for CREATE, UPDATE and DELETE actions"),o.ROLES_INVENTORY="/guides/users-guide/overview/",t.MANAGED_OBJECT=n("Controls access to managed objects in inventory."),t.ALARM=n("Controls access to device alarms."),t.AUDIT=n("Controls access to audit logs."),t.EVENT=n("Controls access to events."),t.MEASUREMENT=n("Controls access to meausurements."),t.OPERATION=n("Controls access to device operations."),t.SUPPORT=n("Controls access as a support user"),t["*"]=n("Controls access in all scopes"),s.INVENTORY=n("Global inventory permissions override Inventory role permissions. If you want to limit Inventory access, enable it only on inventory roles."),e.PERMISSIONS_GLOBAL_LABELS={TENANT_MANAGEMENT:n("Tenant management"),TENANT_STATISTICS:n("Tenant statistics"),OPTION_MANAGEMENT:n("Option management"),APPLICATION_MANAGEMENT:n("Application management"),APPLICATION_MANAGEMENT_SUBSCRIPTIONS:n("Application subscriptions management"),USER_MANAGEMENT:n("User management"),USER_MANAGEMENT_OWN:n("Own user management"),USER_MANAGEMENT_PASSWORD_RESET:n("User management password reset"),IDENTITY:n("Identity"),INVENTORY:n("Inventory"),MEASUREMENT:n("Measurements"),EVENT:n("Events"),ALARM:n("Alarms"),AUDIT:n("Audits"),DEVICE_CONTROL:n("Device control"),CEP_MANAGEMENT:n("CEP management"),DEVICE:n("Device"),DEVICE_BOOTSTRAP:n("Device bootstrap"),RETENTION_RULE:n("Retention rules"),BULK_OPERATION:n("Bulk operations"),CONNECTIVITY:n("Connectivity")},n("Manager"),n("Can read all data of the asset and manage all inventory data, but cannot perform operations. Can also acknowledge and clear alarms. Can create and updates dashboards."),n("Operations: All"),n("Can remotely manage the assets by sending operations to the device. This includes for example remote configuration, software update, etc."),n("Operations: Restart Device"),n("Can restart devices."),n("Reader"),n("Can read all data of the asset."),n("CEP Manager"),n("Has full access to all deployed CEP modules and SmartRules"),n("Devicemanagement User"),n("Gives access to bulk operations and device management application. This does not include access to any device data."),n("Global Manager"),n("Can read and write all data from all devices"),n("Global Reader"),n("Can read all data from all devices"),n("Cockpit User"),n("User to work in Cockpit application. This does not include the access to any device data."),n("Global User Manager"),n("Can access and modify the full user hierarchy"),n("Shared User Manager"),n("Can create new user as his own sub-users and manage this"),n("Tenant Manager"),n("Can manage tenant wide configurations like applications, tenant options and retention rules")}(),function(){"use strict";function e(e){function n(){e.canCreate().then(function(e){o.canCreate=e})}function t(n){e.removeAfterConfirmation(n).then(function(){o.onRemove({role:n})})}function s(){_.forEach(o.roles,function(e){e.name=e.name&&_.trim(e.name),e.description=e.description&&_.trim(e.description)})}var o=this;_.assign(o,{remove:t,duplicate:e.duplicate,edit:e.edit,isUndeletable:e.isUndeletable,$onChanges:s,$onInit:n})}e.$inject=["c8yRolesUi"],angular.module("c8y.roles").component("c8yRolesList",{templateUrl:"core_roles/list/rolesList.html",bindings:{roles:"<",addRole:"&",onRemove:"&"},controllerAs:"vm",controller:e})}(),function(){"use strict";function e(e,n,t){function s(){t.setListTitle(),o()}function o(){return e.all([i(),r()])}function i(){return n.global.list().then(a)}function a(e){d.globalRoles=e}function r(){return n.list().then(l)}function l(e){d.inventoryRoles=e}function c(e,n){_.remove(n,function(n){return n.id===e.id})}var d=this;_.assign(d,{$onInit:s,onRemove:c,listGlobal:i,listInventory:r,listAll:o,add:t.add})}e.$inject=["$q","c8yRoles","c8yRolesUi"],angular.module("c8y.roles").component("c8yRolesOverview",{templateUrl:"core_roles/list/rolesOverview.html",controller:e,controllerAs:"vm"})}(),function(){"use strict";function e(e){var n=this;n.route_list=e.ROUTE_LIST}e.$inject=["c8yRolesUi"],angular.module("c8y.roles").component("c8yRoleTitle",{templateUrl:"core_roles/detail/roleTitle.html",bindings:{name:"<",subtitle:"@",onSave:"&"},controllerAs:"vm",controller:e})}(),function(){"use strict";function e(e,n,t,s,o){function i(){a()}function a(){var n=u.id,o=u.duplicateId,i="new"===n?s.newInventoryRole(o):t.detail(n).then(e.getResData);i.then(function(e){u.role=e})}function r(){var e=n.SCOPES.values();return _.reject(e,p)}function l(e){e.isTopTenant&&(u.permissionScopes=r())}function c(e){return u.saving=!0,e.finally(function(){u.saving=!1}),e}function d(){return c(s.saveInventoryRole(u.role))}function m(e){return c(s.saveInventoryRoleName(u.role,e))}function p(e){var n="AUDIT"===e.name,t="SUPPORT"===e.name&&!u.isTopTenant;return n||t}var u=this;_.assign(u,{$onInit:i,$onChanges:l,STRINGS:s.STRINGS,helpLink:o.docsPath(s.STRINGS.LINKS.ROLES_INVENTORY),onSaveName:m,cancel:s.list,save:d})}e.$inject=["c8yBase","c8yPermissions","c8yRoles","c8yRolesUi","c8yUiUtil"],angular.module("c8y.roles").component("c8yRoleDetailInventory",{templateUrl:"core_roles/detail/roleDetailInventory.html",bindings:{id:"<",duplicateId:"<",isTopTenant:"<"},controllerAs:"vm",controller:e})}(),function(){"use strict";function e(e,n,t,s,o){function i(){a(),d()}function a(){var n=T.id,o=T.duplicateId,i="new"===n?s.newGlobalRole(o):t.global.detail(n).then(e.getResData);i.then(r)}function r(e){T.role=e,d(),l(e.roles)}function l(e){var n=(e||{}).references||[];T.selectedPermissions=_.reduce(n,c,{})}function c(e,n){return e[n.role.id]=!0,e}function d(){return s.listGlobalPermissions().then(m)}function m(e){T.permissions=e,T.groupedPermissions=_.map(_.groupBy(e,"category"),function(e,n){return{category:n,permissions:e}})}function p(e,n){return _.some(e,{access:n})}function u(e,n){var t=_.find(e,{access:n});return t&&t.id}function v(e){var n=T.selectedPermissions||{},t=!g(e);_(T.permissions).map("id").filter(y(e)).forEach(function(e){n[e]=t})}function g(e){return T.selectedPermissions&&T.permissions&&_(T.permissions).map("id").filter(y(e)).every(function(e){return T.selectedPermissions[e]})}function h(e){return T.permissions&&_(T.permissions).map("id").some(y(e))}function y(e){var n=new RegExp(e+"$");return function(e){return n.test(e)}}function f(e){var n=e.category,t=s.STRINGS.PERMISSIONS_GLOBAL_LABELS;return n=t[n]?t[n]:_.capitalize((n||"").toLowerCase().replace(/_/g," "))}function b(e){return S(s.saveGlobalRoleName(T.role,e))}function R(){return S(s.saveGlobalRole(T.role,T.selectedPermissions))}function S(e){return T.saving=!0,e.finally(function(){T.saving=!1}),e}function E(){var e=/^ROLE_APPLICATION/;return _.some(T.selectedPermissions,function(n,t){return n&&e.test(t)})}var T=this;_.assign(T,{$onInit:i,STRINGS:s.STRINGS,helpLink:o.docsPath(s.STRINGS.LINKS.ROLES_INVENTORY),onSaveName:b,cancel:s.list,hasPermission:p,permissionId:u,allSelected:g,selectAll:v,categoryLabel:f,save:R,hasAppPermissions:E,hasPermissionWithAccess:h})}e.$inject=["c8yBase","c8yPermissions","c8yRoles","c8yRolesUi","c8yUiUtil"],angular.module("c8y.roles").component("c8yRoleDetailGlobal",{templateUrl:"core_roles/detail/roleDetailGlobal.html",bindings:{id:"<",duplicateId:"<"},controllerAs:"vm",controller:e})}(),function(){"use strict";function e(e){function n(){return t[Math.floor(Math.random()*t.length)]}var t="ABCDEFGHJKLMNPQRSTUVWXYZabcdefhijkmnoprstuvwxyz123456789",s=this;s.devicesWarning="devices"===e.role.name,s.randomString=_.map(_.range(5),n).join(""),s.canConfirm=function(){return s.confirmString===s.randomString},s.$close=e.$close,s.$dismiss=e.$dismiss}e.$inject=["$scope"],angular.module("c8y.roles").controller("GlobalRoleSaveConfirmCtrl",e)}(),function(){"use strict";function e(e,n){function t(n){n.permissions&&(l&&l(),l=e.$watchCollection(_.constant(c.permissions),s))}function s(){c.scopedPermissions=_.filter(c.permissions,{scope:c.scope})}function o(){c.permissions.push({scope:c.scope,permission:c.accessTypes.READ.value,type:"*"})}function i(e){_.remove(c.permissions,e)}function a(e){delete e.id}function r(e){var n=c.permissions,t=c.scopedPermissions,s=["type","permission","scope"],o=function(n){return _.every(s,function(t){var s=_.matchesProperty(t,_.get(e,t)),o=_.matchesProperty(t,"*");return s(n)||o(n)})},i=_.find(_.without(n,e),o);return i&&(!_.matches(_.pick(e,s))(i)||_.indexOf(t,e)>_.indexOf(t,i))}var l,c=this;_.assign(c,{$onChanges:t,accessTypes:n.ACCESS_TYPES,add:o,remove:i,removeId:a,isOverridden:r})}e.$inject=["$scope","c8yPermissions"],angular.module("c8y.roles").component("c8yRoleInventoryPermissionList",{templateUrl:"core_roles/detail/roleInventoryPermissionList.html",bindings:{permissions:"<",scope:"<"},controllerAs:"vm",controller:e})}(),function(){"use strict";function e(e){var n;n='<c8y-ui-title-set>\n  <c8y-role-title name="vm.role.name" subtitle="{{\'Global role\' | translate}}" on-save="vm.onSaveName(value)">\n  </c8y-role-title>\n</c8y-ui-title-set>\n\n<div class="row">\n\n  <div class="col-md-6">\n    <p translate>\n      A <strong>global role</strong> contains generally applicable permissions. Select, for example, "read" in the row "Inventory", if you want to permit a user in this role to access the whole inventory with all devices.\n    </p>\n    <p ng-show="::vm.helpLink">\n      <a class="btn btn-link btn-xs" ng-href="{{::vm.helpLink}}" target="_blank">\n        <i c8y-icon="question-circle-o"></i> <span translate>Help & Documentation</span>\n      </a>\n    </p>\n\n    <div class="card">\n    <table class="table table-striped">\n      <thead>\n        <tr>\n          <th translate>Type</th>\n          <th style="max-width:100px; text-align: center">\n            <span translate>Read</span><br>\n            <input type="checkbox" ng-click="::vm.selectAll(\'READ\')" ng-checked="::vm.allSelected(\'READ\')">\n          </th>\n          <th style="max-width:100px; text-align: center">\n            <span translate>Admin</span>\n            <a href="" uib-popover="{{::vm.STRINGS.ADMIN | translate}}" popover-trigger="\'mouseenter\'">\n            <i c8y-icon="question-circle-o"></i></a><br>\n            <input type="checkbox" ng-click="::vm.selectAll(\'ADMIN\')" ng-checked="::vm.allSelected(\'ADMIN\')">\n          </th>\n          <th style="max-width:100px; text-align: center">\n            <span translate>Create</span><br>\n            <input type="checkbox" ng-click="::vm.selectAll(\'CREATE\')" ng-checked="::vm.allSelected(\'CREATE\')">\n          </th>\n          <th style="max-width:100px; text-align: center" ng-if="::vm.hasPermissionWithAccess(\'UPDATE\')">\n            <span translate>Update</span><br>\n            <input type="checkbox" ng-click="::vm.selectAll(\'UPDATE\')" ng-checked="::vm.allSelected(\'UPDATE\')">\n          </th>\n        </tr>\n      </thead>\n\n      <tbody>\n        <tr ng-repeat="group in ::vm.groupedPermissions | orderBy:\'category\'">\n          <td>\n            {{::vm.categoryLabel(group) | translate}}\n            <i c8y-icon="question-circle-o" class="btn btn-link" style="font-size:0.7em;text-decoration: none," ng-show="::vm.STRINGS.PERMISSIONS_GLOBAL[category]" popover-placement="right" popover-trigger="\'mouseenter\'" uib-popover="{{::vm.STRINGS.PERMISSIONS_GLOBAL[category] | translate}}">\n            </i>\n          </td>\n          <td style="text-align: center">\n            <input type="checkbox" ng-show="::vm.hasPermission(group.permissions, \'READ\')" ng-model="::vm.selectedPermissions[vm.permissionId(group.permissions, \'READ\')]">\n          </td>\n          <td style="text-align: center">\n            <input type="checkbox" ng-show="::vm.hasPermission(group.permissions, \'ADMIN\')" ng-model="::vm.selectedPermissions[vm.permissionId(group.permissions, \'ADMIN\')]">\n          </td>\n          <td style="text-align: center">\n            <input type="checkbox" ng-show="::vm.hasPermission(group.permissions, \'CREATE\')" ng-model="::vm.selectedPermissions[vm.permissionId(group.permissions, \'CREATE\')]">\n          </td>\n          <td style="text-align: center" ng-if="::vm.hasPermissionWithAccess(\'UPDATE\')">\n            <input type="checkbox" ng-show="::vm.hasPermission(group.permissions, \'UPDATE\')" ng-model="::vm.selectedPermissions[vm.permissionId(group.permissions, \'UPDATE\')]">\n          </td>\n        </tr>\n      </tbody>\n\n    </table>\n  \n   </div>\n  </div>\n\n  <div class="col-md-5 col-md-offset-1">\n\n    <div class="form-group" ng-form name="descriptionSection">\n      <label translate>Description</label>\n      <textarea name="description" class="form-control" style="height:200px" ng-maxlength="1000" ng-model="vm.role.description"></textarea>\n      <c8y-error-feedback field="descriptionSection.description"></c8y-error-feedback>\n    </div>\n\n    <div>\n      <p translate>\n        Select the applications that can be accessed by this role below.\n      </p>\n    </div>\n\n    <br>\n    <p class="alert alert-info" ng-show="vm.hasAppPermissions()" translate>\n      To choose which applications this role should have access to please remove all "Application management" permissions.\n    </p>\n    <br>\n    <div class="card">\n      <c8y-application-access allowed-applications="vm.role.applications" disabled-edit="vm.hasAppPermissions()">\n      </c8y-application-access>\n    </div>\n  </div>\n\n</div>\n<hr>\n\n<div class="page-footer text-center">\n  <button type="button" class="btn btn-default btn-lg" translate ng-click="vm.cancel()" ng-disabled="vm.saving">Cancel</button>\n  <button type="button" class="btn btn-primary btn-lg" translate ng-click="vm.save()" ng-disabled="vm.saving">Save</button>\n</div>\n',e.put("core_roles/detail/roleDetailGlobal.html",n),e.put("/apps/core/roles/detail/roleDetailGlobal.html",n),n='<c8y-ui-title-set>\n  <c8y-role-title name="vm.role.name" subtitle="{{\'Inventory role\' | translate}}" on-save="vm.onSaveName(value)">\n  </c8y-role-title>\n</c8y-ui-title-set>\n\n<div class="row">\n\n  <div class="col-md-6">\n    <p translate>\n      An <strong>inventory role</strong> contains permissions that can be attached to groups of devices.<br>\n      Click <i c8y-icon="plus-circle" class="text-primary"></i> to add a new permission. In the permission drop-down, you can further restrict the access to objects containing the defined type.\n    </p>\n    <p ng-show="::vm.helpLink">\n      <a class="btn btn-link btn-xs" ng-href="{{::vm.helpLink}}" target="_blank"><i c8y-icon="question-circle-o"></i> <span translate>Help & Documentation</span></a>\n    </p>\n  </div>\n</div>\n<div class="row">\n  <div class="col-md-6">\n    <div ng-repeat="scope in vm.permissionScopes" style="margin-bottom:20px">\n      <h4 style="display:inline-block">\n        {{scope.label | translate}}\n      </h4>\n      <a href="" ng-show="::vm.STRINGS.PERMISSIONS_SCOPES[scope.value]" popover-placement="right" popover-trigger="\'mouseenter\'" uib-popover="{{::vm.STRINGS.PERMISSIONS_SCOPES[scope.value] | translate}}">\n        <i c8y-icon="question-circle-o"></i>\n      </a>\n      <c8y-role-inventory-permission-list scope="::scope.value" permissions="vm.role.permissions">\n      </c8y-role-inventory-permission-list>\n    </div>\n\n  </div>\n\n  <div class="col-md-5 col-md-offset-1">\n\n    <div class="card">\n      <div class="card-header">\n        <h4 class="card-title" translate>Role description</h4>\n      </div>\n      <div class="card-block">\n        <p ng-show="::vm.helpLink">\n          <a class="btn btn-link btn-xs" ng-href="{{::vm.helpLink}}" target="_blank">\n            <i c8y-icon="question-circle-o"></i>\n            <span translate>Help & Documentation</span>\n          </a>\n        </p>\n        <div class="form-group">\n          <textarea name="description" class="form-control" style="height:200px" ng-maxlength="1000" ng-model="vm.role.description">\n          </textarea>\n          <c8y-error-feedback field="roleDetailInventoryForm.description"></c8y-error-feedback>\n        </div>\n      </div>\n    </div>\n  </div>\n\n\n\n</div>\n<hr>\n<div class="form-group text-center">\n  <button type="button" class="btn btn-default" ng-click="vm.cancel()" ng-disabled="vm.saving" translate>\n    Cancel\n  </button>\n  <button type="button" class="btn btn-primary" ng-click="vm.save()" ng-disabled="vm.saving || roleDetailInventoryForm.$invalid" translate>\n    Save\n  </button>\n</div>\n',e.put("core_roles/detail/roleDetailInventory.html",n),e.put("/apps/core/roles/detail/roleDetailInventory.html",n),n='<div ng-controller="GlobalRoleSaveConfirmCtrl as vm">\n  <div class="modal-header" data-ng-show="title">\n    <h3>{{title | translate}}</h3>\n  </div>\n  <div class="modal-body">\n    <p translate>\n      Are you sure you want to edit the global role?\n      Please enter "{{vm.randomString}}" to confirm:\n    </p>\n    <p ng-if="vm.devicesWarning" class="help-block bg-warning" style="padding:10px, 0, 10px, 0" translate>\n      Changing the global role "devices" can lead to security hole. E.g. if a device is compromised, attackers might\n      have extended access to the platform.\n    </p>\n    <form class="form-inline" style="margin-top:20px" ng-submit="vm.canConfirm() && vm.$close()">\n      <div class="form-group">\n        <label for="confirmString">{{\'Confirm\' | translate}}:&nbsp;</label>\n        <input type="text" class="form-control" id="confirmString" placeholder="{{\'Type here\' | translate}}" ng-model="vm.confirmString" c8y-autofocus>\n      </div>\n    </form>\n  </div>\n  <div class="modal-footer">\n    <button data-ng-disabled="!vm.canConfirm()" class="btn btn-primary" ng-click="vm.$close()" translate>Confirm</button>\n    <button class="btn btn-default" ng-click="vm.$dismiss()" translate>Cancel</button>\n  </div>\n</div>\n',e.put("core_roles/detail/roleGlobalSaveConfirm.html",n),e.put("/apps/core/roles/detail/roleGlobalSaveConfirm.html",n),n='\n\n<ul class="list-unstyled">\n\n  <li class="card-row-add-remove form-inline" ng-repeat="permission in vm.scopedPermissions">\n      <div style="float:right;margin-top:6px" ng-show="vm.isOverridden(permission)">\n        <a href="" class="text-warning" uib-popover="{{\'This permission is overridden by a more generic one in this role.\' | translate}}" popover-append-to-body="true" popover-trigger="\'mouseenter focus\'" popover-placement="auto left">\n          <i c8y-icon="exclamation-circle"></i>\n        </a>\n      </div>\n      <div class="form-group">\n        <label>{{\'Type\' | translate}}\n        </label>\n        <input type="text" class="form-control" style="font-weight:normal" ng-model="permission.type" ng-change="vm.removeId(permission)">\n      </div>\n      <div class="form-group">\n        <label>{{\'Permission\' | translate}}\n        </label>\n        <select class="form-control" name="permission" style="font-weight:normal" ng-options="access.value as (access.label | translate) for access in vm.accessTypes.values()" ng-model="permission.permission" ng-change="vm.removeId(permission)">\n      </select>\n      </div>\n      <div class="add-remove-btns">\n        <button type="button" class="btn btn-link btn-remove" ng-click="vm.remove(permission)">\n          <i class="text-muted" c8y-icon="minus-circle"></i>\n        </button>\n        <button type="button" ng-click="vm.add()" class="btn btn-link btn-add">\n         <i c8y-icon="plus-circle"></i>\n        </button>\n      </div>\n  </li>\n\n  <li ng-if="vm.scopedPermissions.length === 0" class="card-row-add-remove">\n      <span style="display:block; padding-top: 7px" translate>No permissions for this scope.</span>\n      <div class="add-remove-btns">\n      <button type="button" ng-click="vm.add()" class="btn btn-link btn-add">\n       <i c8y-icon="plus-circle"></i>\n      </button>\n    </div>\n  </li>\n\n</ul>\n',e.put("core_roles/detail/roleInventoryPermissionList.html",n),e.put("/apps/core/roles/detail/roleInventoryPermissionList.html",n),n='<!-- <div class="pull-right">\n  <a ng-href="#/{{vm.route_list}}" class="btn btn-link pull-right" style="text-transform: none">\n    <i c8y-icon="group"></i> <span translate>All roles</span>\n  </a>\n</div> -->\n<div>\n  <h1 class="title" style="display: block">\n    <c8y-inplace-input value="vm.name" on-save="vm.onSave({value: value})" maxlength="50" data-required="true">\n    </c8y-inplace-input>\n  </h1>\n  <!-- <small class="text-muted" style="text-transform:none">{{vm.subtitle | translate}}</small> -->\n</div>\n',e.put("core_roles/detail/roleTitle.html",n),e.put("/apps/core/roles/detail/roleTitle.html",n),n='\n<div class="card-group interact-grid">\n\n  <div class="col-xs-12 col-sm-6 col-md-4" ng-show="vm.canCreate">\n    <a href="" class="card add-card" ng-click="::vm.addRole()" style="min-height: 90px">\n      <i c8y-icon="plus-square" class="text-muted"></i> <span translate>Add role</span>\n    </a>\n  </div>\n\n  <div ng-repeat="role in vm.roles | orderBy:\'name\'" class="col-xs-12 col-sm-6 col-md-4" ng-click="::vm.edit(role)">\n\n    <div class="card" ng-click="vm.edit(role)">\n\n      <div class="card-actions" ng-click="$event.stopPropagation()">\n        <div class="dropdown settings" uib-dropdown>\n          <a class="dropdown-toggle c8y-dropdown" uib-dropdown-toggle ng-click="::$event.stopPropagation()">\n            <span><i c8y-icon="ellipsis-v"></i></span>\n          </a>\n          <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n            <li>\n              <a href="" ng-click="::$event.stopPropagation();vm.edit(role)">\n                <i c8y-icon="edit"></i> <translate>Edit</translate>\n              </a>\n            </li>\n            <li>\n              <a href="" ng-click="::$event.stopPropagation();vm.duplicate(role)">\n                <i c8y-icon="clone"></i> <translate>Duplicate</translate>\n               </a>\n            </li>\n            <li>\n              <a href="" ng-click="::$event.stopPropagation();vm.remove(role)" ng-hide="::vm.isUndeletable(role)">\n                <i c8y-icon="trash"></i> <translate>Remove</translate>\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n\n      <div class="card-header">\n        <div class="card-title text-truncate" title="{{::role.name}}">\n           <span>{{::role.name | translate}}</span>\n        </div>\n      </div>\n      <!-- <hr> -->\n      <div class="card-block">\n        <p ng-show="role.description">{{::role.description | translate}}</p>\n        <small class="text-muted" ng-hide="role.description" translate><em>No description available</em></small>\n        <div style="margin-top: 5px" ng-show="::role.permissions">\n          <span class="badge bg-primary" ng-bind="::role.permissions.length"></span>\n          <small class="text-muted" translate translate-n="::role.permissions.length" translate-plural="permissions">permission</small>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n',e.put("core_roles/list/rolesList.html",n),e.put("/apps/core/roles/list/rolesList.html",n),n='<uib-tabset active="active" class="page-tabs">\n  <uib-tab index="0">\n    <uib-tab-heading>\n      <i c8y-icon="universal-access"></i> Global Roles\n    </uib-tab-heading>\n    <p style="margin: 15px 0 20px">\n      <span class="lead" translate>Grant permissions on a general level.</span><br>\n      <translate>There are several default roles defined, but you can define your own according to your needs.</translate>\n    </p>\n    <c8y-roles-list roles="vm.globalRoles" on-remove="vm.onRemove(role, vm.globalRoles)" add-role="vm.add(\'global\')"></c8y-roles-list>\n  </uib-tab>\n  <uib-tab index="1">\n    <uib-tab-heading>\n      <i c8y-icon="vcard"></i> <translate>Inventory roles</translate>\n    </uib-tab-heading>\n      <p style="margin: 15px 0 20px">\n        <span class="lead" translate>Manage user permissions on a particular group and/or its children.</span><br>\n        <translate>There are several default inventory roles defined, but you can define your own according to your needs.</translate>\n      </p>\n      <c8y-roles-list roles="vm.inventoryRoles" on-remove="vm.onRemove(role, vm.inventoryRoles)" add-role="vm.add(\'inventory\')"></c8y-roles-list>\n  </uib-tab>\n</uib-tabset>\n',e.put("core_roles/list/rolesOverview.html",n),e.put("/apps/core/roles/list/rolesOverview.html",n)}angular.module("c8y.roles").run(["$templateCache",e])}();