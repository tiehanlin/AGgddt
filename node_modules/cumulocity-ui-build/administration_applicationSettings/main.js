/* administration_applicationSettings 8.7.2 2017-08-02T09:53:14+00:00 79d3e7d78638 (hotfix/8.7.2) tip */
angular.module("c8y.parts.applicationSettings",[]).config(["c8yNavigatorProvider","c8yViewsProvider","gettext",function(t,a,n){"use strict";t.addNavigation({parent:n("Settings"),name:n("Application"),path:"applicationsettings",icon:"cog",priority:2e3}),a.when("/applicationsettings",{templateUrl:"administration_applicationSettings/views/index.html"})}]),angular.module("c8y.parts.applicationSettings").controller("applicationSettingsCtrl",["$scope","c8ySettings","c8yTitle","c8yApplication","c8yAlert","gettext","gettextCatalog",function(t,a,n,i,e,o,l){"use strict";function p(){i.listByVisibleLinks().then(function(a){t.applications=c(a),s()})}function c(t){return _.filter(t,{type:"HOSTED"})}function s(){return a.detail({category:"application",key:"default.application"}).then(function(a){t.defaultApplication=_.find(t.applications,{id:a.data.value})})}function r(){return a.updateOption({category:"application",key:"default.application",value:t.defaultApplication.id}).then(function(){e.success(l.getString('Application "{{appName}}" is now the default application for the tenant!',{appName:t.defaultApplication.contextPath}))})}function u(a){var n=a.key.replace(/\./,"_");t[n]=a}function d(){a.detail({category:g,key:h}).then(function(t){return t.data}).then(u)}function m(t){a.updateOption(t).then(d)}function f(){n.changeTitle({title:o("Application")})}var g="access.control",h="allow.origin",y=o("The 'Allowed Domain' setting will enable your JavaScript web applications to directly communicate with Cumulocity REST APIs. Set it to \"*\" to allow applications from any host to communicate with Cumulocity. Set it to http://my.host.com, http://myother.host.com to allow applications from http://my.host.com and from http://myother.host.com to communicate with Cumulocity. See http://enable-cors.org for more information");t.updateDefaultApp=r,t.helpText=y,t.updateAccessCtrl=m,t.filterHostedApps=c,p(),d(),f()}]),function(){"use strict";function t(t){var a;a='<div class="row" data-ng-controller="applicationSettingsCtrl">\n  <div class="col-xs-12 col-sm-10 col-md-8 col-lg-6">\n    <form name="defaultApp" data-ng-submit="updateDefaultApp()">\n      <div class="form-group">\n        <label translate>Default application</label>\n        <i c8y-icon="question-circle" uib-tooltip="{{\'The default application applies to all users of the tenant. Please ensure all users have access to this application.\' | translate}}"></i>\n        <select class="form-control" ng-model="defaultApplication" name="defaultApplication" ng-options="app as ((app.name | humanizeAppName) + \' (/\' + app.contextPath + \')\') for app in applications track by app.id" required>\n        </select>\n      </div>\n      <div class="form-group">\n        <button type="submit" class="btn btn-primary" ng-disabled="defaultApp.$invalid" translate>Save default application</button>\n      </div>\n    </form>\n\n    <form name="accessForm" data-ng-submit="updateAccessCtrl(allow_origin)" novalidate>\n      <div class="form-group">\n        <label translate>Access control</label>\n        <div class="from-control-static">\n          <input type="text" class="form-control" data-ng-model="allow_origin.value" required>\n          <p class="help-block">\n            <span class="text-danger" translate>Beware not to lock yourself out of the platform</span>\n            <a href="" uib-popover="{{helpText | translate}}" popover-placement="bottom" popover-trigger="mouseenter" class="btn btn-sm btn-link">\n              <i c8y-icon="question-circle"></i>\n            </a>\n          </p>\n        </div>\n      </div>\n      <div class="form-group">\n        <button type="submit" class="btn btn-primary" ng-disabled="accessForm.$invalid" translate>Save access control</button>\n      </div>\n\n    </form>\n  </div>\n</div>\n',t.put("administration_applicationSettings/views/index.html",a),t.put("/apps/administration/applicationSettings/views/index.html",a)}angular.module("c8y.parts.applicationSettings").run(["$templateCache",t])}();