/* core_groupsHierarchy 8.7.2 2017-08-02T09:54:29+00:00 e22b35b1d531 (hotfix/8.7.2) tip */
function groupDetailsCtrl(e,n,t,i,a,r,s,o,c,l,u){"use strict";function d(n){e.group=n}function p(t){n.save(t).then(g).then(v).then(function(){i.success(l.getString('Group "{{name}}" saved successfully!',t))}).finally(function(){e.groupDetailsForm.editable=!1})}function g(){a.changeTitle({title:e.group.name})}function v(){o.updateGroupNavigation(e.group)}function m(){s.shouldShowLocalSmartRules().then(function(n){e.smartRules=n})}n.detail(c.groupId).then(t.getResData).then(d),m(),u.canAdminMOs([c.groupId]).then(function(n){e.readOnly=!n}),e.save=p,e.c8yConfig=r}!function(){"use strict";function e(e){e.init()}function n(e){e.loadAll()}e.$inject=["c8yGroupsHierarchyUiProvider"],n.$inject=["groupTypesHierarchyNavigator"];var t=_.identity;angular.module("c8y.groupsHierarchy",["c8y.deviceSelector"]).constant("parentNavigatorItemName",t("Groups")).constant("groupsHierarchyPluginPath","core_groupsHierarchy").config(e).run(n)}(),function(){"use strict";function e(e,n,t,i,a,r,s){function o(){p(),g(),v(),m(),h()}function c(e,n){var t=y=n.get("$q"),i=f=n.get("c8yBase"),a=b=n.get("c8yInventory");w=n.get("c8yGroups");var r,o=t.when([]),c=e.groupId,d=t.when(null),p=function(e){var n=e;return _.forEach(n,function(e){e.unshift({label:s("Groups"),icon:"folder",path:"#/group"})}),n=l(n),G[c]=n,n};return c&&(d=a.detail(c,{withParents:!0}).then(i.getResData),r=d.then(function(e){return u([],[],e)}).then(p),o=t.when(_.get(G,c,r))),o}function l(e){return _.sortBy(e,function(e){return-1*e.length})}function u(e,n,t){return t?(n.unshift(d(t)),y.all([b.directParentDevices(t),b.directParentAssets(t)]).then(function(t){var i=[].concat(t[0]).concat(t[1]),a=[];return 0===i.length?(e.push(n),y.when(e)):(_.forEach(i,function(t){var i=b.detail(t.id,{withParents:!0}).then(f.getResData).then(function(t){return y.when(u(e,_.cloneDeep(n),t))});a.push(i)}),y.all(a).then(function(){return e}))})):y.when(e)}function d(e){return{icon:w.getIconSpecs(e).iconOpen,groupType:e.type,label:e.name||s("Group")+" "+e.id,path:"#/group/"+e.id}}function p(){n.when(D,{templateUrl:"core_groupsHierarchy/views/groupsList.html",controller:"groupsListCtrl"}),n.when(x,{name:s("Sub-assets"),icon:"folder-open",templateUrl:"core_groupsHierarchy/views/groupsList.html",controller:"groupsListCtrl",priority:990}),n.when("/assetsearch",{name:s("Search controller"),icon:"folder-open",templateUrl:"core_groupsHierarchy/views/search.html",controller:"assetSearchCtrl"}),n.when(x,{templateUrl:"<div></div>",showIf:function(){return!1}}),e.when("/groups",{redirectTo:"/group"}),e.when("/groups/:path*",{redirectTo:"/group/:path"}),n.when(x,{priority:1e3,name:s("Info"),icon:"asterisk",templateUrl:"core_groupsHierarchy/views/groupDetails.html"})}function g(){i.addTitle(x,{data:["$routeParams","c8yBase","c8yInventory",function(e,n,t){var i=function(e){return{title:e.name}},a=e.groupId;return a?t.detailCached(a).then(n.getResData).then(i):{}}]})}function v(){t.addBreadcrumbs(x,{data:c}),t.addBreadcrumbs(A,{data:c})}function m(){a.addGlobalAction({text:s("Add new group"),action:["groupsHierarchySvc",function(e){e.addAssetUI()}],showIfPermissions:{anyRole:["ROLE_INVENTORY_ADMIN","ROLE_INVENTORY_CREATE"]}}),a.addUrlAction({path:"/group/:groupId/:tabName",text:s("Remove group"),priority:-1e4,showIfPermissions:{adminMOs:[":groupId"]},action:["$location","c8yUiUtil","groupsHierarchySvc",function(e,n,t){t.getGroup(n.getContext().id).then(t.deleteGroupWithConfirmation).then(_.bind(e.path,e,"/group"))}]})}function h(){r.add({name:s("Search all"),path:function(e){return e&&"/assetsearch?s="+window.encodeURIComponent(e)}})}c.$inject=["$routeParams","$injector"];var y,f,b,w,D="/group",x=D+"/:groupId",A="/group/:groupId",G={};return{init:o,$get:function(){}}}e.$inject=["$routeProvider","c8yViewsProvider","c8yBreadcrumbsProvider","c8yTitleProvider","c8yActionsProvider","c8ySearchProvider","gettext"],angular.module("c8y.groupsHierarchy").provider("c8yGroupsHierarchyUi",e)}(),function(){"use strict";function e(e,n,t,i,a,r,s,o,c,l,u,d,p,g,v,m,h,y,f){function b(){if(!e.inSearchMode){var n=t.groupId,i=_.isUndefined(n);return i?w():D(n).then(x).then(A).then(_.partialRight(S,!0))}}function w(){return A().then(_.partialRight(S,!0))}function D(e){return a.detail(e,{withParents:!0}).then(r.getResData)}function x(n){e.currentGroup=Q=n}function A(){var e;return Q?u.isGroup(Q)&&(e=u.getGroupAssetsAndDevices(Q)):e=k()?G():u.getTopLevelGroups(),e}function G(){return i.all([C(),u.getTopLevelGroups()]).then(_.flattenDeep)}function k(){return"devicemanagement"===f.getCurrentContextPath()}function C(){return p.getGroupList().then(function(e){return i.all(_.map(e,function(e){return p.getGroupItems(e,{pageSize:1,withTotalPages:!0}).then(function(n){return e.childCount=n.statistics.totalPages,e})}))})}function S(n,t){X=X||[],t&&(X.length=0),e.items=X=X.concat(n),e.paging=n.paging,T()}function T(){$(Q?Q.name:h("Groups")),I(X?y.getString("Showing {{qty}} items",{qty:X.length}):void 0)}function $(e){c.changeTitle({title:e})}function I(e){c.changeTitle({subtitle:e})}function H(){e.newGroup={groupType:O(),name:""}}function O(){return t.groupId?l.getDeviceSubgroupType():l.getDeviceGroupType()}function N(){delete e.newGroup}function P(e){var n=U(e),t=Q?a.createChildAsset(n,Q):a.createConfirm(n);return t.then(r.getResData).then(M),t.then(function(){o.success(y.getString("Group {{name}} has been created!",{name:e.name})),A().then(_.partialRight(S,!0)),N()})}function U(e){var n=_.cloneDeep(e);return n[Z]={},n.type=n.groupType.type,delete n.groupType,n}function M(e){Q?v.updateGroupChildren(Q):v.addGroupNavigation(e)}function R(e){m.editGroup(e)}function B(n){m.deleteGroupWithConfirmation(n).then(_.partial(_.pull,e.items,n)).then(T)}function L(e){n.url("/group/"+e.id)}function F(e){n.url("/device/"+e.id)}function E(e){return _.some(d.get("/device/"+e.id),{name:"Alarms"})?void n.url("/device/"+e.id+"/alarms"):void F(e)}function j(e){return!q(e)&&!s.isDevice(e)}function q(e){return u.isGroup(e)||p.isDynamicGroup(e)}function W(){e.refreshLoading=!0,A().then(_.partialRight(S,!0)).finally(function(){e.refreshLoading=!1})}function z(){e.paging.loading=!0,e.paging.next().then(S).finally(function(){e.paging.loading=!1})}function V(e){return m.unassignDevice(Q,e).then(function(){_.remove(X,function(n){return n.id==e.id})})}function Y(n){return m.deleteDeviceWithConfirmation(n,j(n)).then(function(){_.remove(e.items,function(e){return e.id==n.id})})}function J(){m.assignDevices(Q).then(W)}function K(e){return u.getIconSpecs(e).iconOpen}var Q,X,Z="c8y_IsDeviceGroup";e.addNewGroup=H,e.cancelNewGroup=N,e.refresh=W,e.loadNext=z,e.onClickEditGroup=R,e.onClickDeleteGroup=B,e.onClickUnassignDevice=V,e.onClickDeleteDevice=Y,e.saveNewGroup=P,e.drillDown=L,e.goToDeviceDetails=F,e.goToDeviceAlarms=E,e.getIconForGroup=K,e.isGroupOrDynamicGroup=q,e.isGroup=u.isGroup,e.isDevice=s.isDevice,e.isOtherItem=j,e.assignDevices=J,e.deviceModel=s.model,e.deviceSerial=s.serial,e.c8yConfig=g,b()}e.$inject=["$scope","$location","$routeParams","$q","c8yInventory","c8yBase","c8yDevices","c8yAlert","c8yTitle","c8yGroupTypesConfig","c8yGroups","c8yTabs","c8yDynamicGroups","c8yConfig","groupTypesHierarchyNavigator","groupsHierarchySvc","gettext","gettextCatalog","c8yApplication"],angular.module("c8y.groupsHierarchy").controller("groupsListCtrl",e)}(),groupDetailsCtrl.$inject=["$scope","c8yInventory","c8yBase","c8yAlert","c8yTitle","c8yConfig","c8ySmartRulesAvailability","groupTypesHierarchyNavigator","$routeParams","gettextCatalog","c8yPermissions"],angular.module("c8y.groupsHierarchy").controller("groupDetailsCtrl",groupDetailsCtrl),angular.module("c8y.groupsHierarchy").controller("groupDevicesCtrl",["$scope","$q","c8yInventory","c8yDevices","c8yModal","gettext","gettextCatalog",function(e,n,t,i,a,r,s){"use strict";function o(){return n.when(e.group)}function c(e){if(e.id)return l(e).then(u)}function l(e){return n.all([i.childAssets(e),i.childDevices(e)]).then(function(e){var n=[];return n.push(e[0]),n.push(e[1]),_.flattenDeep(n)})}function u(n){e.devices=n}function d(n){a({title:r("Confirm unassignment?"),body:s.getString('Do you really want to unassign device "{{name}}"?',{name:n.name})}).then(angular.bind(t,t.removeChildAsset,e.group,n)).then(function(){_.remove(e.devices,function(e){return e.id==n.id})})}function p(){a({templateUrl:"core_groupsHierarchy/views/groupDeviceAssignment.html",controller:"groupDeviceAssignmentCtrl",resolve:{currentGroup:function(){return e.group}}}).then(g)}function g(){return o().then(c)}function v(e){return!i.isDevice(e)}function m(e){$location.url("/device/"+e.id)}function h(e){$location.url("/device/"+e.id+"/alarms")}e.refresh=g,e.paging={refresh:_.noop},e.assignDevices=p,e.unassign=d,e.isDevice=i.isDevice,e.isOtherItem=v,e.goToDeviceDetails=m,e.goToDeviceAlarms=h,e.model=i.model,e.serial=i.serial,e.$watch("group",c)}]),angular.module("c8y.groupsHierarchy").controller("groupDeviceAssignmentCtrl",["$scope","$routeParams","$uibModalInstance","$q","c8yBase","c8yInventory","c8yDevices","currentGroup","gettext","gettextCatalog",function(e,n,t,i,a,r,s,o,c,l){"use strict";function u(){if(o.id)return i.all([s.childAssets(o),s.childDevices(o)]).then(function(n){p=[],p.push(n[0]),p.push(n[1]),e.alreadyAssignedDevices=p=_.flattenDeep(p)})}function d(e){var n=i.when();_.forEach(e,function(e){n=n.then(_.partial(r.addChildAsset,o,e)).then(function(){p.push(e)})}),n.then(function(){e.length=0}).then(t.close)}var p;e.title=c("Assign devices"),e.assign=d,e.isDevice=s.isDevice,e.dismiss=t.dismiss,u()}]),function(){function e(e,n,t,i,a,r,s,o){function c(e){return a.list({text:e,pageSize:1e3}).then(l).then(u)}function l(e){return _.filter(e,function(e){return e.c8y_IsDeviceGroup||r.isProbablyDevice(e)})}function u(n){e.items=n}function d(e){i.changeTitle({title:s("Search all"),subtitle:o.getString('searching "{{expression}}"',{expression:e})})}n.s&&(c(n.s),d(n.s)),e.hideAddAsset=!0,e.inSearchMode=!0}angular.module("c8y.groupsHierarchy").controller("assetSearchCtrl",["$scope","$routeParams","$location","c8yTitle","c8yInventory","c8yDevices","gettext","gettextCatalog",e])}(),function(){"use strict";function e(e,n,t,i,a,r,s,o,c,l,u){function d(){return{groupType:e.getDeviceGroupType()}}function p(e){return r.when(m(e)).then(t.createConfirm).then(n.getResData).then(g)}function g(e){return o.addGroupNavigation(e),e}function v(e){var n=u.getString("Group {{name}} has been created!",{name:e.name});return c.success(n)}function m(e){var n=angular.copy(e);return n[w]={},n.type=n.groupType.type,delete n.groupType,n}function h(){return n.invalid(a.forms,"newGroupForm","name")}function y(e,n){var i=r.when();return _.forEach(n,function(n){var a=_.partial(t.addChildAsset,e,n);i=i.then(a).then(function(){b.push(n)})}),i}function f(e){var n=a.newGroup,t=_.partialRight(y,e),i=r.when(p(n)).then(t);i.then(s.close),i.then(_.partial(v,n))}var b,w="c8y_IsDeviceGroup";a.title=l("Create group"),a.forms={},a.alreadyAssignedDevices=b=[],a.newGroup=d(),a.create=f,a.invalidName=h,a.dismiss=s.dismiss,a.c8yConfig=i}angular.module("c8y.groupsHierarchy").controller("groupCreateAndAssignCtrl",["c8yGroupTypesConfig","c8yBase","c8yInventory","c8yConfig","$scope","$q","$uibModalInstance","groupTypesHierarchyNavigator","c8yAlert","gettext","gettextCatalog",e])}(),function(){"use strict";function e(e){var n;n='<div class="modal-header" ng-show="title">\n  <h3 ng-bind="title | translate"></h3>\n</div>\n<div class="modal-body">\n  <form name="forms.newGroupForm" role="form">\n    <div class="form-group" ng-class="{\'has-error\': invalidName()}">\n      <input type="text" name="name" class="form-control" placeholder="{{\'New group name\' | translate}}" ng-model="newGroup.name" maxlength="{{c8yConfig.validation.groupName.maxlength}}" required>\n    </div>\n  </form>\n  <c8y-device-selector selected-devices="selectedDevices"/>\n</div>\n<div class="modal-footer">\n  <button class="btn btn-primary" ng-disabled="forms.newGroupForm.$invalid" ng-click="create(selectedDevices)" translate translate-n="selectedDevices.length" translate-plural="Create group with {{selectedDevices.length}} devices">\n    Create group with one device\n  </button>\n  <button class="btn btn-default" ng-click="dismiss()" translate>Close</button>\n</div>\n',e.put("core_groupsHierarchy/views/groupCreateAndAssign.html",n),e.put("/apps/core/groupsHierarchy/views/groupCreateAndAssign.html",n),n='<div ng-controller="groupDetailsCtrl">\n  <div class="flex-row wrap group-info">\n    <div style="align-self: flex-start">\n      <i style="font-size: 50px; margin-bottom:0" class="c8y-icon c8y-icon-duocolor" ng-class="{\n          \'c8y-icon-group-smart\': group.type === \'c8y_DynamicGroup\',\n          \'c8y-icon-group-open\': group.type === \'c8y_DeviceGroup\' && !group.c8y_BrokerSource,\n          \'c8y-icon-group-remote\': group.type === \'c8y_DeviceGroup\' && group.c8y_BrokerSource\n          }"></i><br>\n      <small class="text-center center-block" style="position:relative" ng-show="!groupDetailsForm.editable">\n        <small uib-tooltip="{{\'Last update\' | translate}}" class="text-muted">\n          {{group.lastUpdated | date:"H:mm"}}<br>\n          {{group.lastUpdated | date:"dd MMM yyyy"}}\n        </small>\n      </small>\n    </div>\n    <form class="col-sm-6 form-editable" name="groupDetailsForm" ng-submit="save(group)" novalidate ng-class="{\'form-read-only\': !groupDetailsForm.editable}">\n\n      <div class="form-group">\n        <input id="group-name" type="text" class="form-control input-lg" ng-model="group.name" maxlength="{{c8yConfig.validation.groupName.maxlength}}" required>\n      </div>\n      <div class="form-group">\n        <textarea rows="{{smartRules ? 2 : 10}}" class="form-control" ng-model="group.c8y_Notes" placeholder="{{\'add some notes\' | translate}}" ng-disabled="readOnly"></textarea>\n      </div>\n      <small ng-show="!groupDetailsForm.editable" class="text-muted form-edit-btn">\n        <a href="" class="form-edit-btn" ng-click="groupDetailsForm.editable = !groupDetailsForm.editable"><i c8y-icon="pencil"></i> <translate>Edit</translate></a>\n      </small>\n\n\n      <c8y-if-allowed admin-mos="[group.id]">\n        <div class="form-actions">\n          <button type="button" class="btn btn-default" ng-click="groupDetailsForm.editable = !groupDetailsForm.editable"><translate>Cancel</translate></button>\n          <button type="submit" class="btn btn-primary" ng-disabled="groupDetailsForm.$invalid" translate>\n            Save changes\n          </button>\n        </div>\n      </c8y-if-allowed>\n    </form>\n\n  </div>\n\n  <div ng-if="smartRules" class="smart-rules-wrapper">\n    <div ng-include="\'/apps/core/smartRules/views/list.html\'"></div>\n  </div>\n</div>\n',e.put("core_groupsHierarchy/views/groupDetails.html",n),e.put("/apps/core/groupsHierarchy/views/groupDetails.html",n),n='<div class="modal-header" ng-show="title">\n  <h3>{{title | translate}}</h3>\n</div>\n<div class="modal-body">\n  <c8y-device-selector selected-devices="selectedDevices" disabled-devices="alreadyAssignedDevices"></c8y-device-selector>\n</div>\n<div class="modal-footer">\n  <button class="btn btn-default" ng-click="dismiss()" translate>Cancel</button>\n  <button class="btn btn-primary" ng-disabled="selectedDevices.length == 0" ng-click="assign(selectedDevices)" translate translate-n="selectedDevices.length" translate-plural="Assign {{selectedDevices.length}} devices">\n    Assign {{selectedDevices.length}} device\n  </button>\n</div>\n',e.put("core_groupsHierarchy/views/groupDeviceAssignment.html",n),e.put("/apps/core/groupsHierarchy/views/groupDeviceAssignment.html",n),n='<div ng-controller="groupDevicesCtrl">\n  <div class="navbar">\n    <div class="nav navbar-right">\n      <a class="btn btn-link" ng-click="assignDevices()">\n          <i c8y-icon="plus"></i> <translate>Assign devices</translate>\n      </a>\n      <c8y-refresh-btn></c8y-refresh-btn>\n    </div>\n  </div>\n\n  <div class="alert alert-warning" ng-show="devices.length == 0" translate>\n    No devices assigned to group.\n  </div>\n\n  <table class="table table-hover">\n    <tr ng-repeat="dev in devices | filter:isDevice">\n      <td style="width:30px" class="text-center">\n        <c8y-device-status-display device="dev"></c8y-device-status-display>\n      </td>\n\n      <td class="word-break">\n        {{(dev.name || \'Device\' + \' \' + dev.id) | translate}}\n        <small ng-if="model(dev)" class="text-muted hidden-sm hidden-xs" style="margin-right:10px">\n          <strong>{{\'Model\' | translate}}:</strong> {{model(dev)}}\n        </small>\n        <small ng-if="serial(dev)" class="text-muted hidden-sm hidden-xs">\n          <strong>{{\'S/N\' | translate}}:</strong> {{serial(dev)}}\n        </small>\n      </td>\n\n      <td class="text-right interact" ng-click="goToDeviceAlarms(dev)">\n        <small class="status critical" ng-if="dev.c8y_ActiveAlarmsStatus.critical">\n          {{dev.c8y_ActiveAlarmsStatus.critical}} <i c8y-icon="warning"></i>\n        </small>\n        <small class="status major" ng-if="dev.c8y_ActiveAlarmsStatus.major">\n          {{dev.c8y_ActiveAlarmsStatus.major}} <i c8y-icon="exclamation-circle"></i>\n        </small>\n        <small class="status minor" ng-if="dev.c8y_ActiveAlarmsStatus.minor">\n          {{dev.c8y_ActiveAlarmsStatus.minor}} <i c8y-icon="exclamation-circle"></i>\n        </small>\n        <small class="status warning" ng-if="dev.c8y_ActiveAlarmsStatus.warning">\n          {{dev.c8y_ActiveAlarmsStatus.warning}} <i c8y-icon="circle"></i>\n        </small>\n      </td>\n\n      <td class="text-right">\n        <button class="btn btn-danger btn-xs showOnHover" title="{{\'Unassign device\' | translate}}" ng-click="unassign(dev)">\n          <i c8y-icon="times"></i>\n        </button>\n      </td>\n    </tr>\n    <tr ng-repeat="dev in devices | filter:isOtherItem">\n      <td style="width:30px" class="text-center">\n        &nbsp;\n      </td>\n\n      <td class="word-break">\n        {{(dev.name || \'Device \' + dev.id) | translate}}\n        <small ng-if="model(dev)" class="text-muted hidden-sm hidden-xs" style="margin-right:10px">\n          <strong>{{\'Model\' | translate}}:</strong> {{model(dev)}}\n        </small>\n        <small ng-if="serial(dev)" class="text-muted hidden-sm hidden-xs">\n          <strong>{{\'S/N\' | translate}}:</strong> {{serial(dev)}}\n        </small>\n      </td>\n\n      <td>\n\n      </td><td class="text-right">\n        <button class="btn btn-danger btn-xs showOnHover" title="{{\'Unassign item\' | translate}}" ng-click="unassign(dev)">\n          <i c8y-icon="times"></i>\n        </button>\n      </td>\n    </tr>\n  </table>\n</div>\n',e.put("core_groupsHierarchy/views/groupDevices.html",n),e.put("/apps/core/groupsHierarchy/views/groupDevices.html",n),n='<div ng-switch="currentGroup.type">\n  <div ng-switch-when="c8y_DynamicGroup">\n    <c8y-device-list dynamic-group-id="currentGroup.id" set-titles="true">\n    </c8y-device-list>\n  </div>\n  <div ng-switch-default>\n    <!-- @TODO: is this old code? didn\'t see this being rendered in any view -->\n    <!-- <ul class="breadcrumbs text-muted">\n      <li ng-repeat="breadcrumb in breadcrumbs" ng-show="!$last">\n        <span ng-show="!$first"> / </span>\n        <a ng-show="breadcrumb.type == \'grouptype\'" ng-href="#/{{breadcrumb.type}}/{{breadcrumb.name}}">{{breadcrumb.label}}</a>\n        <a ng-show="breadcrumb.type == \'group\'" ng-href="#/{{breadcrumb.type}}/{{breadcrumb.id}}">{{breadcrumb.label}}</a>\n      </li>\n    </ul> -->\n\n    <div class="c8y-toolbar-spacer" ng-class="{\'page-toolbar\': !currentGroup}">\n      <div class="c8y-toolbar navbar navbar-default" c8y-affix>\n\n        <div class="navbar-header">\n          <button type="button" class="navbar-toggle collapsed" ng-click="isPageToolbarExpanded = !isPageToolbarExpanded">\n            <span class="sr-only">Toggle Toolbar</span>\n            <span class="icon-bar"></span>\n            <span class="icon-bar"></span>\n            <span class="icon-bar"></span>\n          </button>\n        </div>\n\n        <div id="page-toolbar" class="navbar-collapse" uib-collapse="!isPageToolbarExpanded">\n          <ul class="nav navbar-nav navbar-right">\n            <li class="navbar-form hidden-xs" ng-show="items.length > 0">\n              <div class="form-group">\n                <label translate>Display as </label>\n                <div class="input-group">\n                  <div class="c8y-select-wrapper">\n                    <select id="layout-switcher" class="form-control" ng-model="listClass" ng-init="listClass=\'interact-grid\'">\n                      <option value="interact-list" translate>List</option>\n                      <option value="interact-grid" translate>Grid</option>\n                    </select>\n                    <span></span>\n                  </div>\n                </div>\n              </div>\n            </li>\n\n            <li>\n              <c8y-if-allowed admin-mos="[currentGroup]">\n                <div class="dropdown" uib-dropdown>\n                  <button class="dropdown-toggle c8y-dropdown btn btn-link" ng-click="addNewGroup()" uib-dropdown-toggle>\n                    <i c8y-icon="plus-square"></i> <span translate>Add group</span>\n                  </button>\n                  <ul class="dropdown-menu" uib-dropdown-menu>\n                    <li class="dropdown-form">\n                      <form name="newGroupForm">\n                        <div class="form-group" ng-show="newGroup">\n                          <input type="text" class="form-control no-cursor" placeholder="{{\'Group name\' | translate}}" ng-model="newGroup.name" maxlength="{{c8yConfig.validation.groupName.maxlength}}" required ng-click="$event.stopPropagation()">\n                        </div>\n                        <button class="btn btn-primary btn-block" ng-show="newGroup" ng-click="saveNewGroup(newGroup)" ng-disabled="newGroupForm.$invalid" translate>Add group</button>\n                      </form>\n                    </li>\n                  </ul>\n                </div>\n              </c8y-if-allowed>\n            </li>\n\n            <li>\n                <c8y-if-allowed admin-mos="[currentGroup]">\n                <button class="btn btn-link" ng-show="currentGroup" ng-click="assignDevices()">\n                  <i c8y-icon="c8y-device-connect"></i> <translate>Assign devices</translate>\n                </button>\n              </c8y-if-allowed>\n            </li>\n\n            <li>\n              <c8y-refresh-btn ng-hide="inSearchMode"></c8y-refresh-btn>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div><!-- toolbar spacer -->\n\n      <div class="card-group" ng-class="listClass">\n\n        <div class="col-xs-12">\n          <div class="c8y-list-header hidden-xs" ng-show="items.length > 0">\n            <!-- Bulk Actions Markup -->\n            <!-- TODO: Bulk actions component -->\n            <!-- NOTE: The markup is here as a placeholder\n            <div class="navbar-form c8y-bulk-actions">\n              <label class="c8y-checkbox input-sm" title="{{\'Select all\' | translate}}">\n                <input type="checkbox"> <span></span>\n              </label>\n              <div class="form-group" title="{{\'Bulk actions\' | translate}}">\n                <div class="input-group">\n                  <div class="c8y-select-wrapper">\n                    <select class="form-control">\n                      <option value="">Bulk Actions</option>\n                      <option value="">Unassign</option>\n                      <option value="">Delete</option>\n                    </select>\n                    <span></span>\n                  </div>\n                  <span class="input-group-btn">\n                      <button type="button" class="btn btn-default" title="{{\'Apply the selected action to the group of checked rows\' | translate}}" translate>Apply</button>\n                    </span>\n                </div>\n              </div>\n            </div>\n           -->\n          </div>\n        </div>\n\n        <!-- empty state -->\n        <div class="c8y-empty-state text-center" ng-show="items.length == 0">\n          <h1 class="c8y-icon c8y-icon-group-add c8y-icon-duocolor"></h1>\n          <h3 translate>No items to display.</h3>\n          <p translate>Add your first group or assign devices using the buttons on the toolbar.</p>\n          <p><small translate>Find out more on the <a c8y-guide-href="/guides/users-guide/cockpit/#adding-groups">User Guide</a>.</small></p>\n        </div>\n        <!-- /.empty state -->\n\n        <!-- filter: isGroup -->\n        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3" ng-repeat="i in items|filter:isGroupOrDynamicGroup|orderBy:\'name\'">\n          <div class="card" ng-click="drillDown(i)">\n\n            <div class="card-actions" ng-click="$event.stopPropagation();">\n              <c8y-if-allowed admin-mos="[currentGroup]">\n                <div class="settings pull-right" is-open="menuOpen" uib-dropdown>\n                  <button type="button" title="{{\'Options\' | translate}}" class="dropdown-toggle c8y-dropdown" aria-haspopup="true" aria-expanded="false" uib-dropdown-toggle>\n                    <i c8y-icon="ellipsis-v"></i>\n                  </button>\n                  <ul class="dropdown-menu" uib-dropdown-menu>\n                    <li>\n                      <a href="" title="{{\'Delete group\' | translate}}" ng-click="onClickDeleteGroup(i)">\n                        <i c8y-icon="times"></i> {{\'Delete\' | translate}}\n                      </a>\n                    </li>\n                  </ul>\n                </div>\n              </c8y-if-allowed>\n            </div>\n\n            <div class="card-header">\n              <!-- TODO: checkbox for performing bulk actions -->\n              <!-- <div class="card-bulk-check" ng-click="$event.stopPropagation();">\n                <label title="Select" class="c8y-checkbox input-sm item-checkbox">\n                  <input type="checkbox"> <span></span>\n                </label>\n              </div> -->\n\n              <div class="card-icon">\n                <i c8y-icon="{{getIconForGroup(i)}}"></i>\n              </div>\n\n              <div class="card-title" title="{{i.name}}">\n                {{i.name}}\n              </div>\n\n            </div> <!-- ./card-header -->\n\n            <div class="card-block">\n              <div class="col-xs-12 text-truncate">\n                <label class="small" translate>Number of children</label> {{i.childCount || (i.childAssets.references.length + i.childDevices.references.length)}}\n              </div>\n            </div>\n\n          </div>\n        </div><!-- /.filter:isGroup -->\n\n\n        <!-- filter: isDevice -->\n        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3" ng-repeat="i in items|filter:isDevice|orderBy:\'name\'">\n          <div class="card" ng-click="goToDeviceDetails(i)">\n\n            <div class="card-actions" ng-click="$event.stopPropagation()">\n              <c8y-if-allowed admin-mos="[currentGroup]">\n                <div class="settings pull-right" uib-dropdown is-open="menuOpen">\n                  <button type="button" title="{{\'Options\' | translate}}" class="dropdown-toggle c8y-dropdown" aria-haspopup="true" aria-expanded="false" uib-dropdown-toggle>\n                    <i c8y-icon="ellipsis-v"></i>\n                  </button>\n                  <ul class="dropdown-menu" uib-dropdown-menu>\n                    <li>\n                      <a href="" ng-hide="inSearchMode" title="{{\'Unassign\' | translate}}" ng-click="onClickUnassignDevice(i)">\n                        <i c8y-icon="chain-broken"></i> {{\'Unassign\' | translate}}\n                      </a></li>\n                    <li>\n                      <a href="" title="{{\'Delete\' | translate}}" ng-click="onClickDeleteDevice(i)">\n                        <i c8y-icon="times"></i> {{\'Delete\' | translate}}\n                      </a>\n                    </li>\n                  </ul>\n                </div>\n              </c8y-if-allowed>\n            </div>\n\n            <div class="card-header separator text-truncate">\n\n              <!-- TODO: checkbox for performing bulk actions -->\n              <!-- <div class="card-bulk-check" ng-click="$event.stopPropagation();">\n                <label title="Select" class="c8y-checkbox input-sm item-checkbox">\n                  <input type="checkbox"> <span></span>\n                </label>\n              </div> -->\n\n              <div class="card-icon">\n                <c8y-device-status-display device="i"></c8y-device-status-display>\n              </div>\n\n              <div class="card-title" title="{{(i.name || \'Device \' + i.id) | translate}}">\n                {{(i.name || \'Device \' + i.id) | translate}}\n              </div>\n            </div><!-- /.card-header -->\n\n            <div class="card-block">\n              <div class="col-xs-12 col-sm-4 text-truncate" ng-if="deviceModel(i)">\n                <label class="small">{{\'Model\' | translate}}</label> {{deviceModel(i)}}\n              </div>\n\n              <div class="col-xs-12 col-sm-4 text-truncate" ng-if="deviceSerial(i)">\n                <label class="small">{{\'S/N\' | translate}}</label> {{deviceSerial(i)}}\n              </div>\n\n              <div class="alarm-status flex-item-right" ng-click="goToDeviceAlarms(i)">\n                <small class="status critical" title="{{\'Critical alarms\' | translate}}" ng-if="i.c8y_ActiveAlarmsStatus.critical" style="white-space: nowrap">\n                  {{i.c8y_ActiveAlarmsStatus.critical}}<i c8y-icon="warning"></i>\n                </small>\n                <small class="status major" title="{{\'Major alarms\' | translate}}" ng-if="i.c8y_ActiveAlarmsStatus.major" style="white-space: nowrap">\n                  {{i.c8y_ActiveAlarmsStatus.major}}<i c8y-icon="exclamation-circle"></i>\n                </small>\n                <small class="status minor" title="{{\'Minor alarms\' | translate}}" ng-if="i.c8y_ActiveAlarmsStatus.minor" style="white-space: nowrap">\n                  {{i.c8y_ActiveAlarmsStatus.minor}}<i c8y-icon="exclamation-circle"></i>\n                </small>\n                <small class="status warning" title="{{\'Warning alarms\' | translate}}" ng-if="i.c8y_ActiveAlarmsStatus.warning" style="white-space: nowrap">\n                  {{i.c8y_ActiveAlarmsStatus.warning}}<i c8y-icon="circle"></i>\n                </small>\n              </div>\n\n            </div><!-- ./card-block -->\n          </div>\n        </div> <!-- /filter: isDevice -->\n\n\n        <!-- filter: isOtherItem -->\n        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3" ng-repeat="i in items|filter:isOtherItem|orderBy:\'name\'">\n          <div class="card" ng-click="goToDeviceDetails(i)">\n\n            <div class="card-actions">\n              <c8y-if-allowed admin-mos="[currentGroup]">\n                <div class="settings pull-right" title="{{\'Options\' | translate}}" uib-dropdown is-open="menuOpen">\n                  <button type="button" class="dropdown-toggle c8y-dropdown" aria-haspopup="true" aria-expanded="false" uib-dropdown-toggle>\n                    <i c8y-icon="ellipsis-v"></i>\n                  </button>\n                  <ul class="dropdown-menu" uib-dropdown-menu>\n                    <li>\n                      <a href="" ng-hide="inSearchMode" title="{{\'Unassign\' | translate}}" ng-click="onClickUnassignDevice(i)">\n                        <i c8y-icon="chain-broken"></i> {{\'Unassign\' | translate}}\n                      </a></li>\n                    <li>\n                      <a href="" title="{{\'Delete\' | translate}}" ng-click="onClickDeleteDevice(i)">\n                        <i c8y-icon="times"></i> {{\'Delete\' | translate}}\n                      </a>\n                    </li>\n                  </ul>\n                </div>\n              </c8y-if-allowed>\n            </div>\n\n            <div class="card-header separator text-truncate">\n              <!-- TODO: checkbox for performing bulk actions-->\n              <!-- <div class="card-bulk-check">\n                <label title="Select" class="c8y-checkbox input-sm item-checkbox">\n                  <input type="checkbox"> <span></span>\n                </label>\n              </div> -->\n              <div class="card-icon">\n                <i c8y-icon="circle text-muted"></i>\n              </div>\n              <div class="card-title" title="{{(i.name || \'Device \' + i.id) | translate}}">\n                {{(i.name || \'Device \' + i.id) | translate}}\n              </div>\n            </div>\n            <div class="card-block">\n              <div class="col-xs-12 col-sm-4 text-truncate" ng-if="deviceModel(i)">\n                  <label class="small">{{\'Model\' | translate}}</label> {{deviceModel(i)}}\n              </div>\n\n              <div class="col-xs-12 col-sm-4 text-truncate" ng-if="deviceSerial(i)">\n                <label class="small">{{\'S/N\' | translate}}</label> {{deviceSerial(i)}}\n              </div>\n            </div><!-- ./card-block -->\n\n          </div>\n        </div>  <!-- /filter: isOtherItem -->\n\n      </div><!-- /.card-group -->\n      <c8y-load-more/>\n  </div>\n</div>\n',
e.put("core_groupsHierarchy/views/groupsList.html",n),e.put("/apps/core/groupsHierarchy/views/groupsList.html",n),n='<div ng-controller="groupsListCtrl">\n  <div ng-include="\'core_groupsHierarchy/views/groupsList.html\'"></div>\n</div>\n',e.put("core_groupsHierarchy/views/search.html",n),e.put("/apps/core/groupsHierarchy/views/search.html",n)}angular.module("c8y.groupsHierarchy").run(["$templateCache",e])}();