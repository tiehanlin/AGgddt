/* administration_tfaSettings 8.7.2 2017-08-02T09:53:15+00:00 79d3e7d78638 (hotfix/8.7.2) tip */
!function(){"use strict";angular.module("c8y.parts.tfaSettings",[])}(),function(){"use strict";function t(t,n,e,a,i){function s(){n.isTfaAvailable().then(function(t){g.available=t}).then(l)}function l(){g.available&&_.forEach(b,o)}function o(t){var n={category:y,key:t.key},a=t.default,i=t.systemOption?e.getSystemOptionValue:e.detailValue;return i(n,a).then(_.partial(r,t))}function r(t,n){g[c(t.key)]=n}function c(t){return _.camelCase(t)}function d(){var n=_.map(b,u);return t.all(n).then(function(){a.success(i("TFA settings updated successfully!"))})}function u(n){var a={category:y,key:n.key,value:p(n)};return f(n)?e.updateOption(a):t.when()}function p(t){return m(g[c(t.key)])}function m(t){var n=_.isNumber(t)||!isNaN(t)&&_.isString(t);return n?_.toNumber(t):t}function f(t){var n=t.readOnly,e=t.readOnlyIfTenantScopeSettingsDisabled&&!g.tenantScopeSettingsEnabled;return!t.systemOption&&!(n||e)}var g=this,v=/^[0-9]\d*$/,y="two-factor-authentication",b=[{systemOption:!0,key:"tenant-scope-settings.enabled",default:!1,readOnly:!0},{key:"enabled",default:!1},{key:"token.validity",default:43200,readOnlyIfTenantScopeSettingsDisabled:!0},{key:"pin.validity",default:30,readOnlyIfTenantScopeSettingsDisabled:!0}];_.assign(g,{$onInit:s,saveSettings:d,limitValidityRegex:v})}t.$inject=["$q","c8yUser","c8ySettings","c8yAlert","gettext"],angular.module("c8y.parts.tfaSettings").component("c8yTfaSettings",{controller:t,controllerAs:"vm",templateUrl:"administration_tfaSettings/tfa-settings.html"})}(),function(){"use strict";function t(t){var n;n='<div class="row" style="margin-top: 2em" ng-if="vm.available">\n  <p class="text-uppercase" style="color: #959595; font-weight: 700">\n    TFA Settings\n  </p>\n  <div class="col-xs-12">\n    <form class="form-horizontal" name="tfaSettingsForm" ng-submit="vm.saveSettings()">\n      <div class="form-group">\n        <div class="checkbox">\n          <label>\n            <input type="checkbox" ng-model="vm.enabled">\n            <span translate>Allow two-factor authentication</span>\n          </label>\n        </div>\n      </div>\n      <div class="form-group" ng-class="{\'has-error\': tfaSettingsForm.tokenValidity.$invalid}">\n        <span class="control-label pull-left"><span translate>Limit token validity for</span>:</span>\n        <div class="col-xs-2">\n          <input class="form-control text-right" name="tokenValidity" maxlength="6" ng-model="vm.tokenValidity" ng-pattern="vm.limitValidityRegex" ng-disabled="!vm.tenantScopeSettingsEnabled" required>\n        </div>\n        <span class="form-control-static pull-left"> <span translate>minutes</span></span>\n      </div>\n      <div class="form-group" ng-class="{\'has-error\': tfaSettingsForm.pinValidity.$invalid}">\n        <p class="control-label pull-left">\n          <span translate>Limit PIN validity for</span>:\n        </p>\n        <div class="col-xs-2">\n          <input class="form-control text-right" maxlength="6" name="pinValidity" ng-model="vm.pinValidity" ng-pattern="vm.limitValidityRegex" ng-disabled="!vm.tenantScopeSettingsEnabled" required>\n        </div>\n        <p class="form-control-static pull-left">\n          <span translate>minutes</span></p>\n      </div>\n      <div class="form-group">\n        <button type="submit" class="btn btn-primary" ng-disabled="tfaSettingsForm.$invalid" translate>\n          Save TFA settings\n        </button>\n      </div>\n    </form>\n  </div>\n</div>\n',t.put("administration_tfaSettings/tfa-settings.html",n),t.put("/apps/administration/tfaSettings/tfa-settings.html",n)}angular.module("c8y.parts.tfaSettings").run(["$templateCache",t])}();