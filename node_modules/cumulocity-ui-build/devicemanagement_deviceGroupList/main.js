/* devicemanagement_deviceGroupList 8.7.2 2017-08-02T09:53:39+00:00 2e289fd803cb (hotfix/8.7.2) tip */
angular.module("c8y.parts.deviceGroupList",[]).config(["$routeProvider","c8yNavigatorProvider","gettext",function(n,e,t){"use strict";e.addNavigation({parent:t("Devices"),name:t("Groups"),priority:1950,path:"devicegroup",icon:"folder-open"}),n.when("/devicegroup",{templateUrl:"devicemanagement_deviceGroupList/views/index.html"})}]),angular.module("c8y.parts.deviceGroupList").controller("deviceGroupListCtrl",["$scope","$location","c8yInventory","c8yBase","c8yModal","c8yAlert","c8yTitle","c8yConfig","gettext","gettextCatalog",function(n,e,t,a,r,i,o,s,l,c){"use strict";function g(e){n.groups||(n.groups=[]);var t=n.groups;e.forEach(function(n){var e=_.find(t,function(e){return e.id===n.id});e?_.assign(e,n):t.push(n)}),y(n.groups.length),n.paging=e.paging}function d(){t.list(b).then(g)}function u(){n.paging.loading=!0,n.paging.next().then(g).finally(function(){n.paging.loading=!1})}function p(){n.groups=null,n.refreshLoading=!0,n.paging.refresh().then(g).finally(function(){n.refreshLoading=!1}),n.paging=null}function v(e){r({title:l("Confirm delete?"),body:c.getString('Do you really want to remove device group "{{name}}"?',{name:e.name}),status:"danger"}).then(angular.bind(t,t.remove,e)).then(angular.bind(a,a.removeFromList,n.groups,e)).then(_.partial(_.pull,n.groups,e))}function m(n){var e=_.assign(_.cloneDeep(b),{name:n});t.save(e).then(d).then(_.partial(i.success,l("Device group created"))).finally(h)}function h(){n.showAddGroup=!n.showAddGroup}function f(n){e.url("/device?parentAsset="+n.id)}function y(n){o.changeTitle({title:l("Device groups"),subtitle:n?l("Showing ")+n+l(" groups"):void 0})}var b={type:"c8y_DeviceGroup"};n.refresh=p,n.onClickDelete=v,n.loadNext=u,n.add=m,n.toggleAddGroup=h,n.showMachines=f,n.c8yConfig=s,d(),y()}]),function(){"use strict";function n(n){var e;e='<div data-ng-controller="deviceGroupListCtrl">\n\n<div class="navbar">\n\n  <div class="nav navbar-right">\n    <form class="navbar-form">\n\n      <div class="form-group" ng-show="showAddGroup">\n        <input type="text" class="form-control" placeholder="{{\'Group name\' | translate}}" data-ng-model="newGroupName" maxlength="{{c8yConfig.validation.groupName.maxlength}}">\n      </div>\n\n      <div class="form-group" ng-show="showAddGroup">\n        <button class="btn btn-primary" ng-click="add(newGroupName)" data-ng-disabled="!newGroupName" translate>Add group</button>\n      </div>\n\n      <a href="" class="btn btn-link" ng-click="toggleAddGroup()">\n        <i c8y-icon="plus"></i> {{\'Add group\' | translate}}\n      </a>\n\n      <c8y-refresh-btn></c8y-refresh-btn>\n    \n  </form></div>\n</div>\n\n<table class="table table-hover" data-ng-show="groups.length">\n    <tr data-ng-repeat="g in groups|orderBy:\'name\'">\n      <td class="interact" ng-click="showMachines(g)">{{g.name}}\n        <small class="text-muted" style="margin-right:10px"><strong translate>Number of devices:</strong> {{g.childAssets.references.length}}</small>\n      </td>\n      <td class="text-right">\n        <a href="" class="btn btn-xs btn-danger showOnHover" title="{{\'Remove device group\' | translate}}" ng-click="onClickDelete(g)">\n          <i c8y-icon="times"></i>\n        </a>\n      </td>\n    </tr>\n</table>\n\n<c8y-load-more></c8y-load-more>\n\n</div>\n',n.put("devicemanagement_deviceGroupList/views/index.html",e),n.put("/apps/devicemanagement/deviceGroupList/views/index.html",e)}angular.module("c8y.parts.deviceGroupList").run(["$templateCache",n])}();