/* core_infoGauge 8.7.2 2017-08-02T09:54:33+00:00 e22b35b1d531 (hotfix/8.7.2) tip */
!function(){"use strict";function e(e){e.init()}e.$inject=["infoGaugeService"],angular.module("c8y.infoGauge",[]).run(e)}(),function(){"use strict";function e(e,t){function n(){a()}function a(){t.add({name:"infoGauge",nameDisplay:e("Info gauge"),description:e("Radial gauge and mutiple label and value pairs for data points"),templateUrl:o,configTemplateUrl:r,options:{noDeviceTarget:!0}})}var i="core_infoGauge/",o=i+"infoGaugeWidget.html",r=i+"infoGaugeWidget.config.html",u="#D90000",g="#50E3C2",l="#FDC000";return{init:n,COLORS:{RED:u,GREEN:g,YELLOW:l}}}e.$inject=["gettext","c8yComponents"],angular.module("c8y.infoGauge").factory("infoGaugeService",e)}(),function(){"use strict";function e(e,t,n,a){function i(){r(),G.length&&$(window).on("resize",y)}function o(){d(),$(window).off("resize",y)}function r(){var e=m.position().left===x.position().left,t=G.innerHeight(),n=t;e&&(n=t-x.height()),m.height(n)}function u(e,t){var n=D[t];if(n){var a=n[e.fragment],i=a&&a[e.series];return i&&i.value}}function g(){var t=e.child.config,n="__active";h.gaugeDatapoint=_.find(t.datapointsGauge,n),h.labelDatapoints=_.filter(t.datapointsLabels,n),l()}function l(){d();var e=h.gaugeDatapoint,t=h.labelDatapoints;if(e){var a=n.latest(c(e),!0);a.then(s),b.push(a)}D=[],_.forEach(t,function(e,t){var a=n.latest(c(e),!0);a.then(function(e){D[t]=e}),b.push(a)})}function s(e){v=e,f()}function c(e){return{series:e.series,fragment:e.fragment,device:e.__target.id}}function d(){_.invoke(b,"stop"),b=[]}function f(){var e=h.gaugeDatapoint;if(v){var t=v[e.fragment],n=t&&t[e.series];h.gaugeValue=n&&n.value,p()}}function p(){var e=h.gaugeValue,n=Number(h.gaugeDatapoint.min||0),a=Number(h.gaugeDatapoint.max||0),i=Number(h.gaugeDatapoint.yellowRangeMin),o=Number(h.gaugeDatapoint.yellowRangeMax),r=Number(h.gaugeDatapoint.redRangeMin),u=Number(h.gaugeDatapoint.redRangeMax),g=d3.scale.linear().domain([n,a]).range([0,100]),l=125.75+(377.25-g(e)/100*377.25),s=w.GREEN;_.isFinite(i)&&_.isFinite(o)&&e>=i&&e<=o&&(s=w.YELLOW),_.isFinite(r)&&_.isFinite(u)&&e>=r&&e<=u&&(s=w.RED),t.find(".gauge-svg svg path.track-value").css({"stroke-dashoffset":-l,stroke:s})}var v,h=this,m=t.find(".gauge-svg"),x=t.find(".gauge-legend"),G=t.parents(".card-inner-scroll"),b=[],D=[],w=a.COLORS,y=_.debounce(r,100);h.getLabelValue=u,e.$watch("child.config",g,!0),e.$watch(function(){return v},f,!0),e.$on("$destroy",o),e.$on("dashboardResize",y),i()}e.$inject=["$scope","$element","c8yMeasurements","infoGaugeService"],angular.module("c8y.infoGauge").controller("infoGaugeWidgetController",e)}(),function(){"use strict";function e(e){var t;t='<h4 translate>Data point for gauge</h4>\n<c8y-data-point-list max-select-count="1" datapoints="config.datapointsGauge" dont-save="true" no-chart></c8y-data-point-list>\n<h4 translate>Data point for labels</h4>\n<c8y-data-point-list datapoints="config.datapointsLabels" dont-save="true" no-chart></c8y-data-point-list>\n',e.put("core_infoGauge/infoGaugeWidget.config.html",t),e.put("/apps/core/infoGauge/infoGaugeWidget.config.html",t),t='<!-- widget start -->\n<div class="label-value-unit-gauge" ng-controller="infoGaugeWidgetController as vm">\n\n  <div class="gauge-legend">\n    <label ng-repeat-start="dp in vm.labelDatapoints" class="text-truncate">{{dp.label}}</label>\n    <h3 ng-repeat-end>{{vm.getLabelValue(dp, $index) | number}}{{dp.unit}}</h3>\n  </div>\n\n<div class="gauge-svg">\n\n  <svg width="214px" height="214px" viewBox="0 0 214 214" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>Oval</title>\n    <desc>radial for GD</desc>\n    <defs></defs>\n\n    <g id="scale" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-dasharray="1,5">\n      <circle id="Oval" stroke="#CACECE" stroke-width="7" cx="107" cy="107" r="103"></circle>\n      <rect id="mask" stroke="none" fill-rule="evenodd" x="0" y="0" width="214" height="214" transform="rotate(-45 290 182)"></rect>\n    </g>\n    <path class="track" d="M 107 27 a 80 80 0 1 0.1 0 Z" transform="rotate(-135 107 107)"></path>\n    <path class="track-value" d="M 107 27 a 80 80 0 1 0.1 0 Z" transform="rotate(-135 107 107)"></path>\n    <text class="center-label" x="107" y="91">{{vm.gaugeDatapoint.label}}</text>\n    <text class="center-value" x="107" y="115">{{vm.gaugeValue | number}}</text>\n    <text class="center-unit" x="107" y="129">{{vm.gaugeDatapoint.unit}}</text>\n  </svg>\n</div>\n<div class="clearfix"></div>\n</div>\n',e.put("core_infoGauge/infoGaugeWidget.html",t),e.put("/apps/core/infoGauge/infoGaugeWidget.html",t)}angular.module("c8y.infoGauge").run(["$templateCache",e])}();