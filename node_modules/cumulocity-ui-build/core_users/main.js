/* core_users 8.7.2 2017-08-02T09:55:58+00:00 e22b35b1d531 (hotfix/8.7.2) tip */
!function(){"use strict";function e(e){e.initUi()}e.$inject=["c8yUsersUiProvider"],angular.module("c8y.users",[]).config(e)}(),function(){"use strict";function e(e,n,t,s){function a(e){return"/users"+(e||"")}function r(){i(),l(),o()}function i(){e.addNavigation({parent:s("Accounts"),name:s("Users"),path:a().replace(/^\//,""),icon:d,priority:5e3,showIfPermissions:{anyRole:g}})}function l(){n.when(m,b),n.when(v,f),n.when(h,f),n.when(h,y)}function o(){t.addTitle(h,w)}function c(e,n){return e.when({title:n.userId})}function u(e,n,t,a,r,i,l,o,c,u,d,p,g){function b(e){return(e.firstName||"")+" "+(e.lastName||"")}function f(e){function n(e){_.forEach(e,function(e){e._expanded=t,n(e._owns)})}var t=e._expanded=!e._expanded;return t||n(e._owns),e}function y(e){return!_.get(e,"owner")||_.get(e,"_owner._expanded")}function w(e){_.forEach(e,function(e){e._expanded=!0})}function A(e){_.forEach(e,function(e){delete e._expanded})}function E(e){return h.replace(/:userId/,encodeURIComponent(e.id))}function R(e){n.path(E(e))}function U(){n.path(m)}function x(n,t){var s={changeGlobalRoles:k,copyInventoryRoles:S,enable:T,disable:N,remove:C,delegate:D,removeDelegate:F},a="string"==typeof t?t:_.get(t,"name"),r=_.get(s,a,e.reject);return r(n,_.get(t,"data"))}function k(e,n){var t=_.map(n.roles,"id");return o.global.updateGroups(e,t)}function S(n){return e.all({copy:c.copyFromUserDialog(n),assignedRoles:l.listInventoryRoles(n)}).then(function(e){var t="replace"===e.copy.process,s=e.copy.roles,a=_.keyBy(e.assignedRoles.data.inventoryAssignments,"managedObject");return u.copyUserRoles(s,a,n,t)})}function N(e){return l.disable(e)}function T(e){return l.enable(e)}function P(e){return _(e._owns).map(function(e){return _.union(P(e),[e])}).flattenDeep().value()}function C(n){var r=n._owns,o=P(n),c=!!o.length,u=function(){return i({title:s("Confirm delete?"),body:a.getString('Do you really want to remove user "{{userName}}"?',n),status:"danger"})},d=function(){var e=o.shift();return e&&l.remove(e).then(d)},p=function(){return t.open({component:"c8yUserRemoveChildrenModal",resolve:{user:_.constant(n)}}).result.then(function(n){var t;if(n.remove&&(t=d()),!_.isUndefined(n.owner)){var s=_.map(r,g(n.owner));t=e.all(_.map(s,l.save))}return t})},g=function(e){return function(n){var t=_.pick(n,["id"]);return t.owner=e,t}},m=c?p():u();return m.then(_.partial(l.remove,n)).then(_.partial(I,n)).then(_.constant({removeUser:!c,refresh:c}))}function I(e){return r.success(a.getString('User "{{userName}}" has been deleted.',e))}function D(e){return l.delegateTo(e).then(_.partial($,e))}function $(e){return r.success(a.getString('You have successfully delegated to user "{{userName}}".',e))}function F(e){var n={id:e.id,delegatedBy:null};return l.save(n).then(_.partial(M,e))}function M(e){return r.success(a.getString('You have successfully removed delegation from user "{{userName}}".',e))}function O(e){return p.hasAnyRole(["ROLE_APPLICATION_MANAGEMENT_READ","ROLE_APPLICATION_MANAGEMENT_ADMIN"],e)}function L(e){return H?G(e)||p.hasRole(e,"ROLE_TENANT_ADMIN"):void 0}function G(e){return H&&H===e.id}var H,V=g();return l.current().then(function(e){H=e.id}),{ROUTE_NEW_USER:v,fullName:b,toggleExpanded:f,createUserFlatTree:d.createUserFlatTree,visibleInList:y,expandAll:w,collapseAll:A,detailLink:E,editUser:R,search:d.search,changeUser:x,getPasswordStrength:V.getStrengthForColor,getPasswordColor:V.getHexColorForColor,getPasswordIcon:V.getIconForColor,isTfaAvailable:l.isTfaAvailable,gotoList:U,userHierarchyActive:d.userHierarchyActive,hasAppManagement:O,isUndeletable:L,isCurrent:G}}c.$inject=["$q","$routeParams"],u.$inject=["$q","$location","$uibModal","gettextCatalog","c8yAlert","c8yModal","c8yUser","c8yRoles","c8yUserRolesUi","c8yUserInventoryRoles","c8yUserUtil","c8yPermissions","passwordStrengthCheckerFactory"];var d="c8y-user",p="th",g=["ROLE_USER_MANAGEMENT_READ","ROLE_USER_MANAGEMENT_ADMIN","ROLE_USER_MANAGEMENT_CREATE"],m=a(),v=a("/new"),h=a("/:userId"),b={template:"<c8y-user-list-view></c8y-user-list-view>"},f={priority:1e3,icon:d,name:s("Profile / Global roles"),template:'<c8y-user-detail-view user-id="$resolve.userId"></c8y-user-detail-view>',resolve:{userId:["$route",function(e){return e.current.params.userId}]}},y={priority:-1e3,icon:p,name:s("Application access"),template:'<c8y-user-application-access user="$resolve.user"></c8y-user-application-access>',resolve:{user:["$route","c8yUser","c8yBase",function(e,n,t){return n.detail(e.current.params.userId).then(t.getResData).then(function(e){return e.owner?n.detail(e.owner).then(t.getResData).then(function(n){return e._owner=n,e}):e})}]}},w={data:c};return{initUi:r,$get:u}}e.$inject=["c8yNavigatorProvider","c8yViewsProvider","c8yTitleProvider","gettext"],angular.module("c8y.users").provider("c8yUsersUi",e)}(),function(){"use strict";function e(e,n,t,s){function a(){e.all([r(),l()]).then(function(){_.forEach(v.users,p)})}function r(){return h=v.users,v.users=[],n.list({pageSize:1e4}).then(i)}function i(e){v.users=_.map(e,function(e){var t=_.find(h,{id:e.id});return e.twoFactorAuthenticationEnabled||n.isTfaActive(e).then(function(n){n&&(e.twoFactorAuthenticationEnabled=n)}),t&&(e._expanded=t._expanded),e})}function l(){return s.global.list({pageSize:1e4}).then(o)}function o(e){v.globalRoles=e}function c(e,n){return t.changeUser(e,n).then(_.partial(u,e))}function u(e,t){var s,a=t||{};if(a.removeUser){var i=_.get(e,"_owner.id");v.users=_.map(_.reject(v.users,{id:e.id}),function(e){return i&&i===e.id?_.omit(e,["$$hashKey"]):e})}return a.refresh||a.removeUser||(s=n.detail(e).then(function(e){var n=e.data,t=n.id;v.users=_.map(v.users,function(e){var s=t===e.id;return s&&(n._expanded=e._expanded),s?p(n):e})})),a.refresh&&(s=r()),s}function d(){return t.userHierarchyActive().then(function(e){v.FEATURE_USER_HIERARCHY=e})}function p(e){return e._globalRoles=_.map(_.get(e,"groups.references"),function(e){return _.find(v.globalRoles,{id:e.group.id})}),e}function g(){return v.FEATURE_USER_HIERARCHY&&_.some(v.users,_.property("_owns.length"))}function m(){n.current().then(function(e){v.canAddUser=n.hasRole(e,"ROLE_USER_MANAGEMENT_ADMIN")||v.FEATURE_USER_HIERARCHY&&n.hasRole(e,"ROLE_USER_MANAGEMENT_CREATE")})}var v=this;_.assign(v,{ROUTE_NEW_USER:t.ROUTE_NEW_USER,collapseAll:t.collapseAll,expandAll:t.expandAll,changeUser:c,refresh:r,showExpandCollapse:g});var h;a(),d().then(m)}e.$inject=["$q","c8yUser","c8yUsersUi","c8yRoles"],angular.module("c8y.users").component("c8yUserListView",{templateUrl:"core_users/userListView/userListView.html",controller:e,controllerAs:"vm"})}(),function(){"use strict";function e(e,n,t,s,a,r,i,l,o,c,u){function d(){f().then(g),y(),p()}function p(){c.userHierarchyActive().then(function(e){$.FEATURE_USER_HIERARCHY=e})}function g(){L?a.detail(L).then(function(e){return e.data}).then(m):(e.isNew=!0,m({enabled:!0}),k(u("New user")))}function m(n){M=n.email,n.devicePermissions=n.devicePermissions||{},e.user=n,e._groups=v(n),e.password.showPassword=e.isNew,e.isNew&&h()}function v(e){return _.reduce(_.get(e,"groups.references"),function(e,n){return e[n.group.id]=!0,e},{})}function h(){_.forEach(e.groups,function(n){_.includes(G,n.name)&&(e._groups[n.id]=!0)})}function b(n){e.groups=n}function f(e){return r.list(e).then(b)}function y(){return a.current().then(w)}function w(n){e.currentUser=O=n}function A(n){e.isNew||!e.password.showPassword&&!E(n)?x(e.user):o.askForPassword().then(R)}function E(e){return e.email!==M}function R(n){n?x(e.user):U()}function U(){i.danger(u("Current password invalid!")),g()}function x(n){e.saving=!0;var t=_.partial(_.ary(i.success,1),u("User successfully saved")),l=c.gotoList,o=!(n.id&&!n.groups),d=_(e._groups).map(function(e,n){return e&&parseInt(n,10)}).filter().value(),p=o?_.partialRight(r.updateGroups,d):_.identity;try{a.save(n).then(s.getResData).then(p).then(t).then(l).finally(function(){e.saving=!1})}catch(n){i.danger(n.message),e.saving=!1}}function k(e){e&&l.changeTitle({title:e})}function S(e){return a.hasRole(e,"ROLE_USER_MANAGEMENT_ADMIN")||a.hasRole(e,"ROLE_USER_MANAGEMENT_CREATE")}function N(e,n){return!(!e||!n)&&(!n.id||(e.id===n.id?a.hasRole(e,"ROLE_USER_MANAGEMENT_OWN_ADMIN"):a.hasRole(e,"ROLE_USER_MANAGEMENT_ADMIN")||a.hasRole(e,"ROLE_USER_MANAGEMENT_CREATE")))}function T(e,n){return!(!e||!n)&&e.id!==n.id}function P(){var n=_.get(e.user,"devicePermissions"),t=_.keys(n);return s.getFlag("deprecated")||t.length}function C(n){var t=function(n){F=v(n),_.forEach(e._groups,function(n,t){e._groups[t]=n&&F[t]})};n?a.detail(n).then(s.getResData).then(t):F=null}function I(n){return S(O)&&_.get(e.user,"owner")&&D(n)}function D(n){return _.get(e.user,"owner")&&F&&!F[n.id]}var $=this;_.assign($,{cancel:c.gotoList});var F,M,O,L=n.userId,G=["business"];e.checkPassword=A,e.$watch("user.userName",k),e.$watch("user.owner",C),e.canEditUser=N,e.canEditUserGroups=S,e.canActivateUser=T,e.forms={},e.password={},e.saving=!1,e.showAcl=P,e.cannotSelectGlobalRole=I,e.restrictedByOwner=D,d()}e.$inject=["$scope","$routeParams","$window","c8yBase","c8yUser","c8yUserGroup","c8yAlert","c8yTitle","c8yUserUtil","c8yUsersUi","gettext"],angular.module("c8y.users").component("c8yUserDetailView",{templateUrl:"core_users/userDetailView/userDetailView.html",controller:e,controllerAs:"vm"})}(),function(){"use strict";function e(e,n,t,s,a){function r(e){e.user&&c.user&&i(c.user)}function i(e){t.hasAppManagement(e).then(function(e){c.hasAppManagement=e})}function l(){var n=_.pick(c.user,["id","applications"]);return e.save(n).then(o)}function o(){var e=a("User's application access successfully changed.");return s.success(e)}var c=this;_.assign(c,{save:l,cancel:t.gotoList,$onChanges:r})}e.$inject=["c8yUser","c8yApplication","c8yUsersUi","c8yAlert","gettext"],angular.module("c8y.users").component("c8yUserApplicationAccess",{templateUrl:"core_users/userDetailView/userApplicationAccess.html",bindings:{user:"<"},controller:e,controllerAs:"vm"})}(),function(){"use strict";function e(e,n){function t(){n.isTfaAvailable().then(function(e){v.twoFactorAuthAvailable=e})}function s(){n.userHierarchyActive().then(function(e){v.FEATURE_USER_HIERARCHY=e})}function a(e){e.users&&v.users&&(v.userFlatTree=n.createUserFlatTree(v.users)),(e.searchFilter||e.globalRolesFilter)&&(h=n.search(v.searchFilter,v.globalRolesFilter))}function r(e){return _.map(e,"group")}function i(e,n){v.onChangeUser({user:e,action:{name:"changeGlobalRoles",data:{roles:n}}})}function l(e){return function(n){v.onChangeUser({user:n,action:e})}}function o(){e.current().then(function(e){v.currentUserId=_.get(e,"id")})}function c(){return!(!v.searchFilter&&!_.get(v.globalRolesFilter,"length",0))}function u(e){return c()?h(e):n.visibleInList(e)}function d(e){return v.FEATURE_USER_HIERARCHY&&v.currentUserId&&e.id!==v.currentUserId}function p(e){return d(e)&&!e.delegatedBy}function g(e){return d(e)&&e.delegatedBy}function m(e){return _.get(e,"_owner._globalRoles",v.globalRoles)}var v=this,h=_.constant(!0);_.assign(v,{$onChanges:a,searchOn:c,fullName:n.fullName,toggleExpanded:n.toggleExpanded,visible:u,detailLink:n.detailLink,editUser:n.editUser,mapRolesForUser:_.memoize(r),changeGlobalRoles:i,copyInventoryRoles:l("copyInventoryRoles"),disable:l("disable"),enable:l("enable"),remove:l("remove"),delegate:l("delegate"),removeDelegate:l("removeDelegate"),getPasswordStrength:n.getPasswordStrength,getPasswordColor:n.getPasswordColor,getPasswordIcon:n.getPasswordIcon,showDelegate:p,showUndelegate:g,globalRolesAvailable:m,isUndeletable:n.isUndeletable,isCurrent:n.isCurrent}),t(),s(),o()}e.$inject=["c8yUser","c8yUsersUi"],angular.module("c8y.users").component("c8yUserList",{templateUrl:"core_users/userList/userList.html",bindings:{users:"<",globalRoles:"<",searchFilter:"<",globalRolesFilter:"<",onChangeUser:"&"},controllerAs:"vm",controller:e})}(),function(){"use strict";function e(e,n,t){function s(e){e.itemsSelected&&d()}function a(){delete g.textFilter,m=_.map(g.itemsSelected,_.clone)}function r(){return _.every(c(),i)}function i(e){return _.find(m,{id:e.id})}function l(e){i(e)?_.remove(m,{id:e.id}):m.push(e)}function o(){m=r()?[]:c()}function c(e){return n("filter")(e||g.items,g.textFilter)}function u(){g.applying=!0,e.when(g.onApply({items:_.map(c(m))})).then(function(){g.isDropDownOpen=!1}).finally(function(){g.applying=!1})}function d(){g.displayLabel=_(g.itemsSelected).sortBy(p).map(p).value().join(", ")}function p(e){return t.getString(e.name)}var g=this;_.assign(g,{onToggleDropdown:a,allSelected:r,toggleSelectAll:o,apply:u,toggle:l,isSelected:i,$onChanges:s,translateName:p});var m=[]}e.$inject=["$q","$filter","gettextCatalog"],angular.module("c8y.users").component("c8yItemSelector",{templateUrl:"core_users/itemSelector/itemSelector.html",bindings:{textPlaceholder:"@",textApply:"@",styleButton:"<",items:"<",itemsSelected:"<",onApply:"&"},controller:e,controllerAs:"vm"})}(),function(){"use strict";function e(){return{restrict:"EA",scope:{acl:"="},templateUrl:"core_users/aclEditor/aclEditor.html",controller:n}}function n(e,n,t,s,a){function r(){i(),l()}function i(){e.newPermission=e.newPermission||{},e.newPermission.deviceSearch=null,e.newPermission.device=null,e.newPermission.scopeType=null,e.newPermission.type=null,e.newPermission.permissionType=null}function l(){s.current().then(function(n){var t=s.hasRole(n,"ROLE_USER_MANAGEMENT_READ"),a=s.hasRole(n,"ROLE_USER_MANAGEMENT_ADMIN");e.allowView=b=t||a,e.allowEdit=f=a})}function o(e){return e&&null!==e&&""!==e}function c(e){return o(e.device)&&o(e.device.id)&&null!==e.scopeType&&o(e.type)&&null!==e.permissionType}function u(n){var t=n.device.id,s=p(n);e.acl[t]||(e.acl[t]=[]),_.includes(e.acl[t],s)||e.acl[t].push(s),i()}function d(n,t){e.acl[n]=e.acl[n].filter(function(e){return e!==t}),0===e.acl[n].length&&delete e.acl[n]}function p(e){return[e.scopeType.value,e.type,e.permissionType.value].join(":")}function g(e){var n=e.split(":");return[a.getString(n[0]),n[1],a.getString(n[2])].join(":")}function m(e){var n={pageSize:20};return e&&(n.text=e),t.list(n).then(function(e){return v(e)})}function v(e){return _.uniqBy(e,"id")}function h(n){e.newPermission.device=n}var b,f;r(),e.isValidPermission=c,e.add=u,e.remove=d,e.allowView=b,e.allowEdit=f,e.getDevices=m,e.setDevice=h,e.translatePermissionString=g}n.$inject=["$scope","$q","c8yInventory","c8yUser","gettextCatalog"],angular.module("c8y.users").directive("c8yAclEditor",e).directive("aclEditor",e)}(),function(){"use strict";function e(){return{restrict:"EA",scope:{user:"=",allSelected:"=?",allowedApplications:"=",disabledEdit:"=?"},templateUrl:"core_users/applicationAccess/applicationAccess.html",controller:n}}function n(e,n,t){function s(){a()}function a(){r().then(l)}function r(){return n.current().then(t.listByUser).then(i)}function i(e){return _.uniqBy(e,"id")}function l(n){e.applications=n,e.marketApps=_.filter(n,{availability:"MARKET"}),e.privateApps=_.filter(n,{availability:"PRIVATE"})}function o(){e.allowedApplications=e.allowedApplications||[]}function c(e){u(e)?p(e):m(e)}function u(n){return e.allSelected||_.some(e.allowedApplications,g(n))||v(n)}function d(n){return e.allSelected||e.disabledEdit||v(n)||h(n)}function p(n){e.allowedApplications=_.reject(e.allowedApplications,g(n))}function g(e){return function(n){return _.toNumber(e.id)===_.toNumber(n.id)}}function m(n){o(),e.allowedApplications.push({id:n.id,type:n.type})}function v(n){var t,s=n.id,a=e.user;if(a&&!e.allSelected){var r=_(_.get(a,"groups.references")).map("group").map("applications").flatten().uniqBy("id").map("id").value();t=_.includes(r,s)}return t}function h(n){var t=_.get(e,"user._owner.applications");return t&&!v(n)&&!_.some(t,{id:n.id})}e.isAccessAllowed=u,e.toggleAccess=c,e.alreadyInGlobalRole=v,e.isDisabled=d,e.notAvailableInOwner=h,s()}n.$inject=["$scope","c8yUser","c8yApplication"],angular.module("c8y.users").directive("c8yApplicationAccess",e).directive("applicationAccessEditor",e)}(),function(){"use strict";function e(){function e(){var e={};switch(t.solution){case"newOwner":e.owner=t.newOwner;break;case"removeOwner":e.owner=null;break;case"delete":e.remove=!0}return t.close({$value:e})}function n(){return t.solution&&("newOwner"!==t.solution||t.newOwner)}var t=this;_.assign(t,{canConfirm:n,confirm:e,solution:"newOwner"})}angular.module("c8y.users").component("c8yUserRemoveChildrenModal",{templateUrl:"core_users/userRemoveChildren/userRemoveChildren.html",bindings:{close:"&",dismiss:"&",resolve:"<"},controller:e,controllerAs:"vm"})}(),function(){"use strict";function e(e){var n;n='<div class="alert alert-warning">\n  <i c8y-icon="exclamation-triangle" class="fa-2x pull-left"></i>\n  <span translate>\n    This feature is deprecated. Although it\'s still fully functional you should rather use new <a href="/apps/administration#roles">Roles</a> feature to set permissions.\n  </span>\n</div>\n\n<div ng-show="allowEdit && newPermission">\n    <div class="row">\n        <div class="form-group col-lg-3">\n            <label>{{\'Managed object\' | translate}} *</label>\n            <input type="text" class="form-control" maxlength="100" ng-model="newPermission.deviceSearch" ng-model-options="{debounce: 300}" placeholder="{{\'Select managed object from list\' | translate}}" uib-typeahead="device.id+\' - \'+device.name for device in getDevices($viewValue)" typeahead-on-select="setDevice($item)" uib-tooltip="{{\'Enter starting fragment of device id or name to search\'| translate}}"/>\n        </div>\n        <c8y-device-permission data-scope="newPermission.scopeType" data-permission-type="newPermission.type" data-access="newPermission.permissionType" data-device="newPermission.device">\n        </c8y-device-permission>\n    </div>\n    <div class="pull-right">\n        <button type="button" class="btn btn-primary" ng-disabled="!isValidPermission(newPermission)" ng-click="add(newPermission)" translate>Add</button>\n    </div>\n</div>\n\n<table class="table table-condensed table-permissions" ng-show="allowView">\n    <thead>\n        <tr>\n            <th translate>Device</th>\n            <th translate>Permissions</th>\n            <th>&nbsp;</th>\n        </tr>\n    </thead>\n    <tbody ng-repeat="(deviceId, permissions) in acl">\n        <tr ng-repeat="permission in permissions track by $index">\n            <td ng-if="$first" style="width: 200px" rowspan="{{permissions.length}}">\n                {{deviceId}}\n            </td>\n            <td>\n                {{translatePermissionString(permission)}}\n            </td>\n            <td class="text-right">\n                <button ng-show="allowEdit" class="btn btn-danger btn-xs showOnHover" title="{{\'Remove permission\' | translate}}" ng-click="remove(deviceId, permission)">\n                <i c8y-icon="times"></i>\n                </button>\n            </td>\n        </tr>\n    </tbody>\n</table>\n',e.put("core_users/aclEditor/aclEditor.html",n),e.put("/apps/core/users/aclEditor/aclEditor.html",n),n='<div class="card-header" ng-show="marketApps.length">\n  <span class="card-title h4" translate>Built-in applications</span>\n  <a href="" uib-popover-html="\'Applications your tenant<br>is subscribed to\' | translate " popover-append-to-body="true" popover-placement="auto right" popover-trigger="\'mouseenter\'">\n    <i c8y-icon="info-circle"></i>\n  </a>\n</div>\n<hr style="margin-top:0; margin-bottom: 0" ng-show="marketApps.length">\n\n<ul class="list-group">\n  <li class="list-group-item item-list-row" ng-repeat="application in marketApps | orderBy:\'name\'">\n    <span style="width:40px" class="text-center">\n      <label class="c8y-checkbox">\n\n      <input type="checkbox" id="{{\'appmarket\' + $index}}" ng-checked="isAccessAllowed(application)" ng-click="toggleAccess(application)" ng-disabled="isDisabled(application)">\n        <span></span>\n      </label>\n    </span>\n    <div class="text-center" style="width:55px">\n      <c8y-app-icon app="::application"></c8y-app-icon>\n    </div>\n    <label for="{{\'appmarket\' + $index}}">\n      {{::application | humanizeAppName}} <br>\n      <small class="text-muted">{{::application.contextPath}}</small>\n    </label>\n    <div style="width:40px" class="text-center">\n      <a href="" ng-show="alreadyInGlobalRole(application)" popover-append-to-body="true" popover-placement="auto left" popover-trigger="\'focus mouseenter\'" uib-popover="{{\'This application is already made available in a global role\' | translate}}">\n        <i c8y-icon="info-circle"></i>\n      </a>\n      <a href="" class="text-warning" ng-show="notAvailableInOwner(application) && !alreadyInGlobalRole(application)" popover-append-to-body="true" popover-placement="auto left" popover-trigger="\'focus mouseenter\'" uib-popover="{{\'This application is not accessible by the owner.\' | translate}}">\n          <i c8y-icon="exclamation-circle"></i>\n      </a>\n    </div>\n  </li>\n</ul>\n\n<div class="card-header" ng-show="privateApps.length">\n  <span class="card-title h4" translate>Custom applications</span>\n  <a href="" uib-popover-html="\'Applications owned <br>by your tenant\' | translate" popover-append-to-body="true" popover-placement="auto" popover-trigger="\'mouseenter\'">\n    <i c8y-icon="info-circle"></i>\n  </a>\n</div>\n<hr style="margin-top:0; margin-bottom: 0" ng-show="privateApps.length">\n\n<ul class="list-group" style="margin-bottom:20px">\n  <li class="list-group-item item-list-row" ng-repeat="application in privateApps | orderBy:\'name\'">\n    <span style="width:40px" class="text-center">\n      <label class="c8y-checkbox">\n\n      <input type="checkbox" id="{{\'appprivate\' + $index}}" ng-checked="isAccessAllowed(application)" ng-click="toggleAccess(application)" ng-disabled="isDisabled(application)">\n        <span></span>\n      </label>\n    </span>\n    <div class="text-center" style="width:50px">\n      <c8y-app-icon app="::application"></c8y-app-icon>\n    </div>\n    <label for="{{\'appprivate\' + $index}}">\n      {{::application | humanizeAppName}}<br>\n      <small class="text-muted">{{::application.contextPath}}</small>\n    </label>\n    <div style="width:40px" class="text-center" ng-show="alreadyInGlobalRole(application)">\n      <i c8y-icon="info-circle" class="text-info" popover-append-to-body="true" popover-placement="right" popover-trigger="\'mouseenter\'" uib-popover="{{\'This application is already made available in a global role\'}}">\n      </i>\n    </div>\n  </li>\n</ul>\n',e.put("core_users/applicationAccess/applicationAccess.html",n),e.put("/apps/core/users/applicationAccess/applicationAccess.html",n),n='<div class="c8y-child-assets-selector" is-open="vm.isDropDownOpen" on-toggle="vm.onToggleDropdown(open)" uib-dropdown>\n\n  <button type="button" ng-style="vm.styleButton" class="btn dropdown-toggle" uib-dropdown-toggle>\n    <span class="text-truncate" ng-bind="vm.displayLabel" ng-show="vm.displayLabel"></span>\n    <span class="text-truncate text-muted" ng-hide="vm.displayLabel" ng-bind="vm.textPlaceholder"></span>\n  </button>\n\n  <ul class="dropdown-menu multiselect-container" ng-click="$event.stopPropagation();" uib-dropdown-menu style="margin-top:-32px">\n\n    <li class="multiselect-item">\n      <div class="input-group input-group-search">\n        <input class="form-control" type="text" placeholder="{{\'Type to filter\' | translate}}&hellip;" ng-model="vm.textFilter">\n        <span class="input-group-addon">\n            <i c8y-icon="search" ng-class="{\'fa-spin\': loading}" class="fa fw fa-search"></i>\n        </span>\n      </div>\n    </li>\n\n    <li class="multiselect-item" ng-if="vm.isDropDownOpen">\n      <label class="c8y-checkbox input-sm" ng-click="vm.toggleSelectAll(); $event.preventDefault()">\n        <input type="checkbox" ng-checked="vm.allSelected()" ng-click="::vm.toggleSelectAll(); $event.stopPropagation()" style="margin-top:0"><span></span>\n        &nbsp;<span translate>All</span>\n      </label>\n\n    </li>\n\n    <li class="multiselect-item-container">\n      <ul class="list-unstyled" ng-if="vm.isDropDownOpen">\n        <li ng-repeat="item in vm.items | filter:vm.textFilter | orderBy:vm.translateName" class="multiselect-item">\n\n          <label class="c8y-checkbox input-sm text-truncate" ng-click="::vm.toggle(item); $event.preventDefault()">\n            <input type="checkbox" ng-checked="vm.isSelected(item)" ng-click="::vm.toggle(item); $event.stopPropagation()" style="margin-top:0">\n            <span></span>\n            &nbsp;<span class="label-text" ng-bind="::item.name | translate"></span>\n          </label>\n        </li>\n      </ul>\n    </li>\n    <li class="divider"></li>\n    <li><button class="btn btn-primary btn-block" ng-click="::vm.apply()" ng-disabled="vm.applying" translate ng-bind="vm.textApply"></button></li>\n  </ul>\n</div>\n',e.put("core_users/itemSelector/itemSelector.html",n),e.put("/apps/core/users/itemSelector/itemSelector.html",n),n='<div class="tab-content-spacer"></div>\n<div class="row">\n  <div class="col-sm-6">\n\n    <p class="alert alert-info" ng-show="vm.hasAppManagement" translate>\n      This user is assigned a global role with \'Application management\' permissions. Therefore all applications are accessible.\n    </p>\n    <div class="card">\n\n      <c8y-application-access user="vm.user" all-selected="vm.hasAppManagement" allowed-applications="vm.user.applications" disabled-edit="vm.hasAppManagement">\n      </c8y-application-access>\n    </div>\n    <hr>\n\n<div class="text-center page-footer">\n  <button type="button" class="btn btn-default btn-lg" ng-click="vm.cancel()" translate>\n    Cancel\n  </button>\n  <button type="button" class="btn btn-primary btn-lg" ng-click="vm.save()" ng-disabled="vm.hasAppManagement" translate>\n    Save\n  </button>\n</div>\n\n  </div>\n</div>\n',e.put("core_users/userDetailView/userApplicationAccess.html",n),e.put("/apps/core/users/userDetailView/userApplicationAccess.html",n),n='<div class="tab-content-spacer"></div>\n<form name="forms.userForm" role="form" ng-submit="checkPassword(user)" novalidate>\n  <div class="row">\n\n    <div class="col-md-6">\n      <div class="card">\n        <div class="card-header">\n          <h4 class="card-title" translate>Identification</h4>\n        </div>\n        <hr>\n        <div class="card-block">\n          <c8y-ui-edit-user user="user" forms="forms" password="password" disabled-edit="!canEditUser(currentUser, user)" hide-active="!canActivateUser(currentUser, user)" hide-owner="!vm.FEATURE_USER_HIERARCHY" hide-delegate="!vm.FEATURE_USER_HIERARCHY" hide-language="true">\n          </c8y-ui-edit-user>\n        </div>\n      </div>\n    </div>\n\n    <div class="col-md-6">\n      <div class="card">\n        <div class="card-header">\n          <h4 class="card-title" translate>Global roles</h4>\n        </div>\n        <hr>\n        <ul class="list-group">\n          <li class="list-group-item item-list-row" ng-repeat="group in groups">\n            <label class="c8y-checkbox text-center" style="width:40px">\n              <input type="checkbox" id="{{\'groupcheckbox\' + $index}}" ng-model="_groups[group.id]" ng-disabled="!canEditUserGroups(currentUser) || restrictedByOwner(group)">\n                <span></span>\n            </label>\n            <label for="{{\'groupcheckbox\' + $index}}">\n              {{::group.name}}\n              <a href="" class="pull-right text-info" ng-show="restrictedByOwner(group)" popover-append-to-body="true" popover-trigger="\'focus mouseenter\'" popover-placement="auto" uib-popover="{{\'Only global roles defined on the owner can be defined on the owned user\' | translate}}">\n                <i c8y-icon="exclamation-circle"></i>\n              </a>\n              <br><small class="text-muted">{{::group.description}}</small>\n            </label>\n          </li>\n        </ul>\n\n        <div ng-show="showAcl()">\n          <h3 translate>User permissions</h3>\n          <c8y-acl-editor acl="user.devicePermissions"></c8y-acl-editor>\n        </div>\n      </div>\n    </div>\n  </div>\n\n\n  <div class="text-center page-footer">\n    <hr>\n    <button type="button" ng-click="vm.cancel()" class="btn btn-default btn-lg" translate>\n      Cancel\n    </button>\n    <button ng-if="canEditUser(currentUser, user)" ng-class="{\'btn-save\': showPassword}" class="btn btn-primary btn-lg btn-wide" type="submit" ng-disabled="forms.userForm.$invalid || saving" translate>\n      Save\n    </button>\n  </div>\n</form>\n',e.put("core_users/userDetailView/userDetailView.html",n),e.put("/apps/core/users/userDetailView/userDetailView.html",n),n='<div class="user-list-header user-list-row">\n  <div class="col-expand"></div>\n  <!-- <div class="col-selector"></div> -->\n  <label class="col-username" translate>User name</label>\n  <label class="col-subaccounts"></label>\n  <label class="col-fullname" translate>Name and email</label>\n  <label class="col-globalroles" translate>Global roles</label>\n  <label class="col-passwordstrength" translate>Pass strength</label>\n  <label class="col-twofactorauth"></label>\n  <div class="col-actions"></div>\n</div>\n\n<div class="user-list-row" ng-repeat="user in vm.userFlatTree | filter:vm.visible" ng-class="::{owned: !!user.owner, owns: !!user._owns.length}" ng-style="::{\'margin-left\': (user._depth * 10), \'margin-right\': (user._depth * 10) }">\n\n  <div class="col-expand interact" ng-style="::{width: 50 - user._depth * 10}" ng-click="::!vm.searchOn() && vm.toggleExpanded(user)" ng-show="::user._owns.length">\n    <span translate class="hidden-md hidden-lg">Subaccounts</span>\n    <span class="badge bg-primary hidden-md hidden-lg">{{::user._owns.length}}</span>\n    <i c8y-icon="chevron-down" ng-class="{\'open\':user._expanded}" ng-hide="vm.searchOn()"></i>\n  </div>\n  <div class="col-expand" ng-style="::{width: 50 - user._depth * 10}" ng-hide="::user._owns.length">\n  </div>\n\n  <!-- <div class="col-selector">\n    <input type="checkbox" ng-model="user._selected">\n  </div> -->\n\n  <div class="col-username interact text-truncate" ng-click="vm.editUser(user)">\n    <div class="user-dot" ng-class="{\'user-disabled\': !user.enabled}">{{::user.userName.substr(0,2)}}</div>\n    <span class="username text-truncate">\n      <span title="{{::user.userName}}" class="h4">{{::user.userName}}</span>\n      <br ng-hide="::user.enabled"><small class="disabled" ng-hide="::user.enabled" translate>Disabled</small>\n      <br ng-show="::user.delegatedBy"><small class="delegated text-primary" ng-show="::user.delegatedBy" translate>Delegated by {{::user.delegatedBy}}</small>\n    </span>\n\n  </div>\n\n  <div class="col-subaccounts text-center">\n    <a href="" ng-show="::user._owns.length" uib-tooltip="{{\'Subaccounts\' | translate}}" ng-show="vm.USER_HIERARCHY">\n      <span class="badge bg-primary">{{::user._owns.length}}</span>\n    </a>\n  </div>\n\n  <div class="col-fullname interact text-truncate" ng-click="vm.editUser(user)">\n    {{::vm.fullName(user)}}\n    <br><small>{{::user.email}}</small>\n  </div>\n\n\n  <div class="col-globalroles">\n    <c8y-item-selector items="vm.globalRolesAvailable(user)" items-selected="::vm.mapRolesForUser(user.groups.references)" on-apply="vm.changeGlobalRoles(user, items)" text-apply="{{\'Apply\' | translate}}" text-placeholder="{{\'----\'}}" style-button="{background: \'transparent\', padding: 5, \'padding-right\': 40}">\n    </c8y-item-selector>\n  </div>\n\n  <!-- Password strength -->\n  <div class="col-passwordstrength">\n    <span ng-if="user.passwordStrength" ng-style="{color: vm.getPasswordColor(user.passwordStrength)}">\n      <i c8y-icon="{{::vm.getPasswordIcon(user.passwordStrength)}}"></i>\n      {{::vm.getPasswordStrength(user.passwordStrength) | translate}}\n    </span>\n  </div>\n\n  <div class="col-twofactorauth text-right">\n    <i class="text-success" ng-show="user.twoFactorAuthenticationEnabled" uib-tooltip="{{\'TFA enabled\'}}" c8y-icon="key">\n    </i>\n  </div>\n\n  <div class="col-actions">\n    <div class="dropdown" uib-dropdown>\n      <a class="dropdown-toggle c8y-dropdown" uib-dropdown-toggle ng-click="::$event.stopPropagation()">\n        <span><i c8y-icon="ellipsis-v"></i></span>\n      </a>\n      <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n        <li>\n          <a ng-href="#{{::vm.detailLink(user)}}">\n            <i c8y-icon="edit"></i> <translate>Edit</translate>\n          </a>\n        </li>\n        <li ng-hide="vm.isCurrent(user)">\n          <a href="" ng-click="vm.copyInventoryRoles(user)">\n            <i c8y-icon="clipboard"></i> <translate>Copy inventory roles from...</translate>\n          </a>\n        </li>\n        <li ng-show="::vm.showDelegate(user)">\n         <a href="" ng-click="vm.delegate(user)">\n           <i c8y-icon="universal-access"></i> <translate>Delegate</translate>\n         </a>\n       </li>\n       <li ng-show="::vm.showUndelegate(user)">\n         <a href="" ng-click="vm.removeDelegate(user)">\n           <i c8y-icon="universal-access"></i> <translate>Undelegate</translate>\n         </a>\n       </li>\n        <li ng-show="user.enabled && !vm.isCurrent(user)">\n          <a href="" ng-click="vm.disable(user)">\n            <i c8y-icon="ban"></i> <translate>Disable</translate>\n          </a>\n        </li>\n        <li ng-hide="::(user.enabled)">\n          <a href="" ng-click="vm.enable(user)">\n            <i c8y-icon="check-circle-o"></i> <translate>Enable</translate>\n          </a>\n        </li>\n        <li>\n          <a href="" ng-click="vm.remove(user)" ng-hide="::vm.isUndeletable(user)">\n            <i c8y-icon="user-times"></i> <translate>Delete</translate>\n          </a>\n        </li>\n      </ul>\n    </div>\n  </div>\n  <div class="tip" ng-class="{\'expanded\': user._expanded}"></div>\n</div>\n',
e.put("core_users/userList/userList.html",n),e.put("/apps/core/users/userList/userList.html",n),n='<c8y-ui-title-set title="\'Users\' | translate"></c8y-ui-title-set>\n\n<div class="c8y-toolbar-spacer" ng-class="{\'page-toolbar\': context.context != \'group\' && context.context != \'device\'}">\n  <div class="c8y-toolbar navbar navbar-default" c8y-affix>\n\n    <div class="navbar-header">\n      <button type="button" class="navbar-toggle collapsed" ng-click="isPageToolbarExpanded = !isPageToolbarExpanded">\n        <span class="sr-only">Toggle Toolbar</span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n      </button>\n      <span class="navbar-brand" ng-if="showTitle()">\n        <span class="visible-xs" translate>Users</span>\n        <span class="hidden-xs"><i c8y-icon="users"></i> <translate>Users</translate></span>\n      </span>\n    </div>\n\n    <div id="page-toolbar" class="navbar-collapse collapse" uib-collapse="!isPageToolbarExpanded" aria-expanded="false" style="height: 0px">\n\n      <ul class="nav navbar-nav navbar-left" style="max-width: 50%">\n        <li class="navbar-form">\n          <div class="input-group input-group-search">\n            <input class="form-control" type="search" ng-model="vm.searchFilter" placeholder="{{\'Filter users\' | translate}}">\n            <span class="input-group-addon">\n                <i c8y-icon="search" ng-class="{\'fa-spin\': loading}" class="fa fw fa-search"></i>\n            </span>\n          </div>\n        </li>\n        <li class="navbar-form">\n          <c8y-item-selector style="width:250px" items="::vm.globalRoles" items-selected="vm.globalRolesFilter" on-apply="vm.globalRolesFilter=items" text-apply="{{\'Filter\' | translate}}" text-placeholder="{{\'Filter by global roles\' | translate}}" style-button="{padding: 5, \'padding-right\': 40, border:\'2px solid #E5E7E7\'}">\n          </c8y-item-selector>\n        </li>\n      </ul>\n      <ul class="nav navbar-nav navbar-right">\n        <li>\n          <button type="button" class="btn btn-link" ng-click="vm.expandAll(vm.users)" ng-show="vm.showExpandCollapse()">\n            <i c8y-icon="window-maximize"></i> {{\'Expand all\' | translate}}\n          </button>\n        </li>\n        <li>\n          <button type="button" class="btn btn-link" ng-click="vm.collapseAll(vm.users)" ng-show="vm.showExpandCollapse()">\n            <i c8y-icon="minus"></i> {{\'Collapse all\' | translate}}\n          </button>\n        </li>\n        <li ng-show="vm.canAddUser">\n          <a href="#{{vm.ROUTE_NEW_USER}}" class="btn btn-link">\n            <i c8y-icon="user-plus"></i> {{\'Add user\' | translate}}\n          </a>\n        </li>\n        <li>\n          <button type="button" class="btn btn-link" ng-click="vm.refresh()">\n            <i c8y-icon="refresh"></i> {{\'Reload\' | translate}}\n          </button>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>\n\n\n<c8y-bulk-actions actions="vm.bulkActions" list="vm.users" on-complete="vm.refreshUsers()">\n</c8y-bulk-actions>\n\n<c8y-user-list global-roles="::vm.globalRoles" users="vm.users" global-roles-filter="vm.globalRolesFilter" search-filter="vm.searchFilter" on-change-user="vm.changeUser(user, action)">\n</c8y-user-list>\n',e.put("core_users/userListView/userListView.html",n),e.put("/apps/core/users/userListView/userListView.html",n),n='<div class="modal-header">\n  <h3>\n    <i c8y-icon="{{vm.titleIcon}}"></i>\n    <span>{{\'Confirm delete?\' | translate}}</span>\n  </h3>\n</div>\n\n<p class="text-center" style="padding:10px" translate>\n  <b>You are about to delete user ""{{vm.resolve.user.userName}}"</b>\n  <br>How should subusers be handled?</p>\n<p></p>\n\n<div class="text-center" style="margin-bottom:20px">\n  <label class="radio-inline">\n    <input type="radio" ng-model="vm.solution" value="newOwner"> {{\'Select a new owner\' | translate}}\n  </label>\n  <label class="radio-inline">\n    <input type="radio" ng-model="vm.solution" value="removeOwner"> {{\'Remove owner\' | translate}}\n  </label>\n  <label class="radio-inline">\n    <input type="radio" ng-model="vm.solution" value="delete"> {{\'Delete all subusers\' | translate}}\n  </label>\n</div>\n\n<c8y-ui-user-picker ng-show="vm.solution===\'newOwner\'" hidden-users="vm.resolve.user" ng-model="vm.newOwner">\n</c8y-ui-user-picker>\n\n<div class="modal-footer">\n  <button class="btn btn-primary" ng-disabled="!vm.canConfirm()" ng-click="vm.confirm()" translate>\n    Confirm\n    </button>\n\n  <button class="btn btn-default" ng-click="vm.dismiss()" translate>Cancel</button>\n</div>\n',e.put("core_users/userRemoveChildren/userRemoveChildren.html",n),e.put("/apps/core/users/userRemoveChildren/userRemoveChildren.html",n)}angular.module("c8y.users").run(["$templateCache",e])}();