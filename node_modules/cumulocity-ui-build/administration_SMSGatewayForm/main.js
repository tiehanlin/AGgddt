/* administration_SMSGatewayForm 8.7.2 2017-08-02T09:53:15+00:00 79d3e7d78638 (hotfix/8.7.2) tip */
!function(){"use strict";function e(e,t,a){e.addNavigation({parent:a("Settings"),name:a("OpenIT credentials"),path:"smsgateway",icon:"envelope-o",priority:1e3}),t.when("/smsgateway",{templateUrl:"administration_SMSGatewayForm/views/smsGateway.html"})}angular.module("c8y.parts.smsGateway",[]).config(["c8yNavigatorProvider","c8yViewsProvider","gettext",e])}(),function(){"use strict";function e(e,t,a,n,s,r,i,o){function l(){d(),a.getSMSGatewayUsername().then(function(t){var a=t.data.value;e.hasCredentials=!0,e.credentials={usernameOpenIT:a,passwordOpenIT:""}},function(){e.hasCredentials=!1,e.credentials={usernameOpenIT:"",passwordOpenIT:""}})}function d(){s.changeTitle({title:i("OpenIT credentials")})}function c(){a.updateSMSGatewayInfo(e.credentials.usernameOpenIT,e.credentials.passwordOpenIT).then(function(){e.hasCredentials=!0,p("passwordOpenIT"),n.success(i("Credentials successfully updated"))})}function u(){return r({title:i("Confirm delete?"),body:i("Deleting credentials will lock out any users with SMS-based two-factors authentication, and disable the SMS-based smart rules and device communication. Are you sure you want to delete your OpenIT credentials?"),status:"danger"}).then(function(){a.deleteSMSGatewayCredentials().then(function(){e.hasCredentials=!1,n.success(i("Credentials successfully deleted")),p("usernameOpenIT"),p("passwordOpenIT")})})}function p(t){e.credentials[t]="",e.SMSGatewayForm[t].$setPristine(!0)}e.updateSMSGatewayInfo=c,e.validationHints=t.validationHints,e.invalid=_.partial(t.invalid,e,"SMSGatewayForm"),e.errorList={required:i("This field is required!")},e.deleteCredentials=u,l()}angular.module("c8y.parts.smsGateway").controller("smsGatewayCtrl",["$scope","c8yBase","c8ySMSGateway","c8yAlert","c8yTitle","c8yModal","gettext","gettextCatalog",e])}(),function(){"use strict";function e(e){var t;t='<div class="row" ng-controller="smsGatewayCtrl">\n  <div class="col-xs-12 col-sm-8 col-md-6 col-lg-4">\n    <p style="font-weight: 300" translate>Please enter your credentials from your SMS provider.  This enables platform features that utilise SMS services (e.g. two-factor authentication and user notifications).</p>\n    <form name="SMSGatewayForm" ng-submit="updateSMSGatewayInfo()" novalidate>\n      <div class="form-group" ng-class="{\'has-error\': invalid(\'usernameOpenIT\')}">\n        <label for="usernameOpenIT" translate>Username</label>\n        <input uib-tooltip="{{validationHints(SMSGatewayForm.usernameOpenIT, errorList)}}" c8y-autocomplete="off" type="text" class="form-control input-border" ng-model="credentials.usernameOpenIT" name="usernameOpenIT" required>\n      </div>\n      <div class="form-group" ng-class="{\'has-error\': invalid(\'passwordOpenIT\')}">\n        <label for="passwordOpenIT" translate>Password</label>\n        <input uib-tooltip="{{validationHints(SMSGatewayForm.passwordOpenIT, errorList)}}" c8y-autocomplete="off" type="password" class="form-control input-border" ng-model="credentials.passwordOpenIT" name="passwordOpenIT" required>\n      </div>\n      <div class="form-group">\n        <button type="submit" class="btn btn-primary" ng-disabled="SMSGatewayForm.$invalid" translate>Save credentials</button>\n        <button type="button" class="btn btn-default" ng-click="deleteCredentials()" ng-disabled="!hasCredentials" translate>Delete credentials</button>\n      </div>\n    </form>\n  </div>\n</div>\n',e.put("administration_SMSGatewayForm/views/smsGateway.html",t),e.put("/apps/administration/SMSGatewayForm/views/smsGateway.html",t)}angular.module("c8y.parts.smsGateway").run(["$templateCache",e])}();