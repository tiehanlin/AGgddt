/* core_tenantApplications 8.7.2 2017-08-02T09:55:45+00:00 e22b35b1d531 (hotfix/8.7.2) tip */
!function(){"use strict";function n(n,t){n.when("/tenants/:tenantId",{templateUrl:"core_tenantApplications/views/index.html",controller:"tenantAppAssignmentCtrl",icon:"c8y-modules",name:t("Applications"),priority:3e3,showIf:["$routeParams",function(n){return n&&"new"!==n.tenantId}]})}angular.module("c8y.tenantApplications",[]).config(["c8yViewsProvider","gettext",n])}(),angular.module("c8y.tenantApplications").controller("tenantAppAssignmentCtrl",["$scope","$routeParams","$uibModal","c8yApplication","c8yTenant","c8yAlert","c8yBase","gettextCatalog",function(n,t,e,a,i,l,o,r){"use strict";function s(){v&&"new"!==v&&i.detail(v).then(function(n){return n.data}).then(c).then(p)}function c(t){n.tenant=w=t}function p(){n.associatedApplications=n.tenant.applications.references.map(function(n){return n.application})}function u(){a.listByTenant().then(_.partialRight(_.uniqBy,"id")).then(d)}function d(t){t.forEach(function(n){y.push(n)}),f(y),n.applications=y}function f(t){var e=[];t.forEach(function(n){var t=n.owner.tenant.id;t&&e.indexOf(t)===-1&&e.push(t)}),n.owners=[{value:null,label:"- "+r.getString("Show all")}].concat(e.map(function(n){return{value:n,label:n}}))}function m(t){return i.addApplication(w,t).then(function(){n.associatedApplications.push(t)})}function b(t){return i.removeApplication(w,t).then(angular.bind(o,o.removeFromList,n.associatedApplications,t))}function h(n){A=A!==n?n:null}function g(n){return A===n}var v=t.tenantId,w={},y=[],A=null;n.filterOwner=function(t){return null===n.filter.owner||t.owner.tenant.id===n.filter.owner},n.applications=y,n.associate=m,n.dissociate=b,n.openItem=h,n.isOpen=g,n.filter={owner:null,text:{}},s(),u()}]),function(){"use strict";function n(n){var t;t='<div class="row">\n  <div class="col-lg-6">\n    <h4 translate>Subscribed applications</h4>\n    <ul class="list-group">\n      <li class="list-group-item" ng-repeat="a in associatedApplications|orderBy:\'name\'">\n        <a ng-click="dissociate(a)" class="btn btn-danger pull-right btn-xs showOnHover" translate>unsubscribe</a>\n        {{a | humanizeAppName}}\n      </li>\n    </ul>\n  </div>\n\n  <div class="col-lg-6">\n    <h4 translate>Available applications</h4>\n\n    <div class="form-inline" style="margin-bottom:10px">\n      <label class="control-label">{{\'Owner\' | translate}}:</label>\n      <select ng-options="owner.value as owner.label for owner in owners" ng-model="filter.owner" class="form-control"></select>\n      <label class="control-label"><i c8y-icon="search"></i></label>\n      <input type="search" class="form-control" ng-model="filter.text.$">\n    </div>\n\n    <ul class="list-group" style="max-height:600px; overflow-y: scroll">\n      <li class="list-group-item interact" ng-repeat="a in applications|filter:filterOwner|filter:filter.text|orderBy:\'name\'" ng-click="openItem(a)">\n        <a ng-click="associate(a)" class="btn btn-primary pull-right btn-xs showOnHover" translate>subscribe</a>\n        {{a | humanizeAppName}}\n        <div uib-collapse="!isOpen(a)">\n          <p><b>{{\'Availability\' | translate}}:</b> {{a.availability}}</p>\n          <p><b>{{\'Type\' | translate}}:</b> {{a.type}}</p>\n          <p><b>{{\'Owner\' | translate}}:</b> {{a.owner.tenant.id}}</p>\n        </div>\n      </li>\n    </ul>\n  </div>\n</div>\n',n.put("core_tenantApplications/views/index.html",t),n.put("/apps/core/tenantApplications/views/index.html",t)}angular.module("c8y.tenantApplications").run(["$templateCache",n])}();