/* administration_applications 8.7.2 2017-08-02T09:53:13+00:00 79d3e7d78638 (hotfix/8.7.2) tip */
angular.module("c8y.parts.applications",[]).config(["c8yNavigatorProvider","c8yViewsProvider","c8yTitleProvider","c8yActionsProvider","gettext",function(n,a,t,i,e){"use strict";n.addNavigation({parent:e("Applications"),name:e("Own applications"),path:"applications",icon:"c8y-modules",priority:4e3}),a.when("/applications",{templateUrl:"administration_applications/views/list.html"}),a.when("/applications/:applicationId",{controller:"applicationDetailCtrl",templateUrl:"administration_applications/views/detail.html",icon:"list",name:e("Properties")}),t.addTitle("/applications/:applicationId",{data:["$q",function(n){return n.when({templateUrl:"administration_applications/views/title.html"})}]}),i.addUrlAction({path:"/applications/:applicationId/*",text:e("Open"),button:{cls:"default"},icon:"external-link",priority:2e3,action:["$routeParams","$window","c8yBase","c8yApplication",function(n,a,t,i){return i.detail(n.applicationId).then(t.getResData).then(function(n){a.location.href=i.getHref(n)})}]}),i.addUrlAction({path:"/applications/:applicationId/*",text:e("Delete"),button:{cls:"danger"},icon:"trash",priority:1e3,showIf:["$routeParams","c8yApplication",function(n,a){return a.getCurrent().then(function(a){return a.id!==n.applicationId})}],action:["$routeParams","$window","$location","c8yBase","c8yApplication","c8yModal","gettextCatalog",function(n,a,t,i,r,l,o){return r.detail(n.applicationId).then(i.getResData).then(function(n){return l({title:e("Confirm delete?"),body:o.getString('Do you really want to remove application "{{app | humanizeAppName}}"?',{app:n}),status:"danger"}).then(angular.bind(r,r.remove,n)).then(function(){t.path("/applications")})})}]})}]),function(){"use strict";function n(n,a,t,i,e,r,l,o,p){function s(a){n.applications||(n.applications=[]),a.forEach(function(a){n.applications.push(a)}),n.paging=a.paging,w(n.applications.length)}function c(a){delete n.applications,t.listByOwner(a).then(s),t.getCurrent().then(d)}function d(a){n.currentApp=a}function u(n){a.path("/applications/"+n.id)}function m(n){a.path("/applications/"+n.id+"/plugins")}function v(){a.path("/applications/new")}function g(){return e.open({templateUrl:"administration_applications/appWizard/wizard.html"}).result.then(f)}function h(a){i({title:o("Confirm delete?"),body:p.getString('Do you really want to remove application "{{appName}}"?',{appName:a.name}),status:"danger"}).then(angular.bind(t,t.remove,a)).then(angular.bind(r,r.removeFromList,n.applications,a))}function y(){n.paging.loading=!0,n.paging.next().then(s).finally(function(){n.paging.loading=!1})}function f(){n.applications=null,n.refreshLoading=!0,n.paging.refresh().then(s).finally(function(){n.refreshLoading=!1}),n.paging=null}function b(n){return"HOSTED"===n.type?n.contextPath:n.externalUrl}function w(n){l.changeTitle({title:o("Own applications"),subtitle:_.isUndefined(n)?"":p.getPlural(n,"1 application","{{$count}} applications",{})})}function z(n){return!!n.manifest}function x(a){return Boolean(n.currentApp&&n.currentApp.id===a.id)}n.getHref=t.getHref,n.detail=u,n.detailPlugins=m,n.add=v,n.addWithWizard=g,n.onClickDelete=h,n.loadNext=y,n.refresh=f,n.path=b,n.iconType=t.icon,n.isManifestApp=z,n.isCurrentApp=x,c(),w()}n.$inject=["$scope","$location","c8yApplication","c8yModal","c8yWizardModal","c8yBase","c8yTitle","gettext","gettextCatalog"],angular.module("c8y.parts.applications").controller("applicationListCtrl",n)}(),function(){"use strict";function n(n,a,t,i,e){function r(){a.applicationId&&i.detail(a.applicationId).then(t.getResData).then(function(n){o.app=n})}function l(){return e.getString('This application has been cloned from "{{name}}" and won\'t get any further updates from the original app.',o.clonedFromApp)}var o=this;o.getClonedAppTooltip=l,n.$on("$routeChangeSuccess",r),r()}angular.module("c8y.parts.applications").controller("appDetailsTitleCtrl",["$rootScope","$routeParams","c8yBase","c8yApplication","gettextCatalog",n])}(),angular.module("c8y.parts.applications").controller("applicationDetailCtrl",["$scope","$location","$route","$routeParams","c8yApplication","c8yUser","c8yBase","c8yTitle","gettext","gettextCatalog","c8yAlert",function(n,a,t,i,e,r,l,o,p,s,c){"use strict";function d(a){n.application=e.convertType(a)}function u(i){c.success(p("Application has been saved successfully!")),n.isNew?a.path("/applications/"+i.id):t.reload()}function m(a){n.tenant=a.tenant}function v(a){a.length&&(n.file=a[0])}function g(){r.current().then(m)}function h(){b?e.detail(b).then(function(n){return n.data}).then(d):(n.isNew=!0,d({}))}function y(a){a=_.cloneDeep(a),a.manifest||(a.manifest={});var t=a.type;"HOSTED"===t&&(a.resourcesUrl="/"),a=e.revertType(a);var i=e.save(a).then(l.getResData);return"HOSTED"===t&&n.file&&(i=i.then(function(t){return a=t,e.uploadArchive(a,n.file)}).then(l.getResData).then(function(n){return e.save(_.assign(a,{activeVersionId:n.id})).then(l.getResData)})),i.then(u)}function f(a){var t=[];return n[w][a]&&n[w][a].$error&&_.forEach(n[w][a].$error,function(n,i){n&&(_.isUndefined(z[i])||("object"==typeof z[i]?z[i][a]&&t.push(z[i][a]):t.push(z[i])))}),t.join(" ")}var b=i.applicationId,w="applicationForm",z={required:s.getString("This field is required!"),maxlength:s.getString("Up to 120 characters allowed!"),url:s.getString("Valid URL required!")};b="new"===b?void 0:b,n.icon=e.icon,n.typeLabel=e.typeLabel,n.invalid=angular.bind(l,l.invalid,n,"applicationForm"),n.validationHints=f,n.save=y,n.onFileSelect=v,n.host=a.host(),h(),g()}]),function(){"use strict";function n(n,a,t){function i(){e()}function e(){r().then(o)}function r(){return a.current().then(function(n){return t.listByUser(n).then(l)})}function l(n){return _.uniqBy(n,function(n){return n.id})}function o(a){n.applications=a}function p(){n.allowedApplications=n.allowedApplications||[]}function s(n){c(n)?d(n):u(n)}function c(a){return!!_.find(n.allowedApplications,function(n){return n.id==a.id})}function d(a){n.allowedApplications=_.filter(n.allowedApplications,function(n){return n.id!=a.id})}function u(a){p(),n.allowedApplications.push({id:a.id,type:a.type})}n.isAccessAllowed=c,n.toggleAccess=s,i()}angular.module("c8y.parts.applications").controller("applicationAccessEditorCtrl",["$scope","c8yUser","c8yApplication",n])}(),function(){"use strict";function n(){return{restrict:"A",scope:{allowedApplications:"=",disabledEdit:"=?"},templateUrl:"administration_applications/views/applicationAccessEditor.html",controller:"applicationAccessEditorCtrl"}}angular.module("c8y.parts.applications").directive("applicationAccessEditor",n)}(),function(){"use strict";function n(n){function a(n){t.wizardCtrl.data.chosenMethod=n,t.wizardCtrl.goTo(n.nextStep)}var t=this,i=[{label:n("Upload ZIP file"),icon:"upload",nextStep:"upload"},{label:n("HTTP(S) proxy"),icon:"cloud",nextStep:"httpsProxy"},{label:n("External application"),icon:"external-link-square",nextStep:"external"},{label:n("Clone existing application"),icon:"copy",nextStep:"clone1"}];_.assign(t,{methods:i,chooseMethod:a})}n.$inject=["gettext"],angular.module("c8y.parts.applications").component("appWizardMenuStep",{require:{wizardCtrl:"^c8yWizardStep"},templateUrl:"administration_applications/appWizard/appWizardMenuStep.html",controller:n,controllerAs:"vm"})}(),function(){"use strict";function n(n,a,t,i){function e(n){return u.inProgress=!0,u.progress=0,r(n).then(_.partialRight(s,n)).then(c).finally(function(){u.inProgress=!1,u.progress=100})}function r(n){u.label=i("Creating application");var e={};return e.name=l(n),e.key=o(n),e.contextPath=o(n),e.manifest={},e.type="HOSTED",e.resourcesUrl="/",e=a.revertType(e),a.trySave(e).then(function(n){return n},function(n){t.danger(n.errorMessage,n.errorDetails)}).finally(function(){u.progress+=10})}function l(n){var a=n.file.name.split(".");return a.pop(),a.join(".")}function o(n){var a=l(n).toLowerCase();return p(a)}function p(n){return n.replace(/[^a-zA-Z0-9-_]/g,"")}function s(t,e){return u.label=i("Uploading archive"),a.uploadArchive(t,e.file).progress(function(n){u.progress=10+n.loaded/n.total*90}).then(n.getResData).then(_.partial(a.setActiveArchive,t)).then(function(){return t})}function c(n){d.wizardCtrl.data.createdApp=n,d.wizardCtrl.goTo("success")}var d=this,u={inProgress:!1,progress:0,label:null};_.assign(d,{processingStatus:u,createAppAndUploadArchive:e})}n.$inject=["c8yBase","c8yApplication","c8yAlert","gettext"],angular.module("c8y.parts.applications").component("appWizardUploadStep",{require:{wizardCtrl:"^c8yWizardStep"},templateUrl:"administration_applications/appWizard/appWizardUploadStep.html",controller:n,controllerAs:"vm"})}(),function(){"use strict";function n(n,a,t,i){function e(n){return n.manifest={},n.type="REPOSITORY",n=t.revertType(n),t.save(n).then(a.getResData).then(r)}function r(n){l.wizardCtrl.data.createdApp=n,l.wizardCtrl.goTo("success")}var l=this,o={required:i.getString("This field is required!"),maxlength:i.getString("Up to 120 characters allowed!"),url:i.getString("Valid URL required!")};_.assign(l,{host:n.host(),invalid:a.invalidFormOrField,validationHints:_.partialRight(a.validationHints,o),save:e})}n.$inject=["$location","c8yBase","c8yApplication","gettextCatalog"],angular.module("c8y.parts.applications").component("appWizardHttpsProxyStep",{require:{wizardCtrl:"^c8yWizardStep"},templateUrl:"administration_applications/appWizard/appWizardHttpsProxyStep.html",controller:n,controllerAs:"vm"})}(),function(){"use strict";function n(n,a,t){function i(t){return t.manifest={},t.type="EXTERNAL",t=a.revertType(t),a.save(t).then(n.getResData).then(e)}function e(n){r.wizardCtrl.data.createdApp=n,r.wizardCtrl.goTo("success")}var r=this,l={required:t.getString("This field is required!"),maxlength:t.getString("Up to 120 characters allowed!"),url:t.getString("Valid URL required!")};_.assign(r,{invalid:n.invalidFormOrField,validationHints:_.partialRight(n.validationHints,l),save:i})}n.$inject=["c8yBase","c8yApplication","gettextCatalog"],angular.module("c8y.parts.applications").component("appWizardExternalStep",{require:{wizardCtrl:"^c8yWizardStep"},templateUrl:"administration_applications/appWizard/appWizardExternalStep.html",controller:n,controllerAs:"vm"})}(),function(){"use strict";function n(n){function a(){t()}function t(){n.listByVisibleLinks().then(i)}function i(n){l.existingApps=n}function e(n){l.wizardCtrl.data.appClone=l.wizardCtrl.data.appClone||{},l.wizardCtrl.data.appClone.srcApp=n,l.wizardCtrl.data.appClone.destApp=r(n),l.wizardCtrl.goTo("clone2")}function r(n){var a,t=0;do t++,a={name:[n.name,t].join("-"),key:[n.key,t].join("-"),contextPath:[n.contextPath,t].join("-")};while(_.find(l.existingApps,a));return a}var l=this;_.assign(l,{$onInit:a,choose:e})}n.$inject=["c8yApplication"],angular.module("c8y.parts.applications").component("appWizardClone1Step",{require:{wizardCtrl:"^c8yWizardStep"},templateUrl:"administration_applications/appWizard/appWizardClone1Step.html",controller:n,controllerAs:"vm"})}(),function(){"use strict";function n(n,a){function t(){return i.cloneInProgress=!0,a.clone(i.wizardCtrl.data.appClone.srcApp,i.wizardCtrl.data.appClone.destApp).then(function(n){i.wizardCtrl.data.createdApp=n,i.wizardCtrl.goTo("success")}).finally(function(){i.cloneInProgress=!1})}var i=this;_.assign(i,{host:n.host(),cloneInProgress:!1,clone:t})}n.$inject=["$location","c8yApplication"],angular.module("c8y.parts.applications").component("appWizardClone2Step",{require:{wizardCtrl:"^c8yWizardStep"},templateUrl:"administration_applications/appWizard/appWizardClone2Step.html",controller:n,controllerAs:"vm"})}(),function(){"use strict";function n(n,a,t,i){function e(){var n=_.defaults(r.wizardCtrl.data.smartApp,o);return n.key=[n.path,"appkey",String(Math.random()).substr(2)].join("-"),n.manifest={imports:["core/c8yBranding"]},n.manifest.uiCreated=!0,t.save(n).then(a.getResData).then(function(n){r.wizardCtrl.data.createdApp=n,r.wizardCtrl.goTo("success")})}var r=this,l={required:i.getString("This field is required!"),maxlength:i.getString("Up to 120 characters allowed!"),url:i.getString("Valid URL required!")},o={type:"HOSTED",resourcesUrl:"https://bitbucket.org/m2m/cumulocity-ui/raw/default/build",resourcesUsername:"afwifawfoijafa",resourcesPassword:"kjijfgknnoippk"};_.assign(r,{host:n.host(),invalid:a.invalidFormOrField,validationHints:_.partialRight(a.validationHints,l),create:e})}n.$inject=["$location","c8yBase","c8yApplication","gettextCatalog"],angular.module("c8y.parts.applications").component("appWizardSmartAppStep",{require:{wizardCtrl:"^c8yWizardStep"},templateUrl:"administration_applications/appWizard/appWizardSmartAppStep.html",controller:n,controllerAs:"vm"})}(),function(){"use strict";function n(n,a){function t(t){i.wizardCtrl.close(),n.open(a.getHref(t),"_blank")}var i=this;_.assign(i,{open:t})}n.$inject=["$window","c8yApplication"],angular.module("c8y.parts.applications").component("appWizardSuccessStep",{require:{wizardCtrl:"^c8yWizardStep"},templateUrl:"administration_applications/appWizard/appWizardSuccessStep.html",controller:n,controllerAs:"vm"})}(),function(){"use strict";function n(){function n(n,t,i,e){function r(n){var t;return n.match(a)?(l.$setValidity("c8yApplicationContextPath",!0),t=n):l.$setValidity("c8yApplicationContextPath",!1),t}var l=e;l.$parsers.unshift(r)}var t={require:"ngModel",link:n};return t}var a=/^\S+$/;angular.module("c8y.parts.applications").directive("c8yApplicationContextPath",n)}(),function(){"use strict";function n(n){var a;a='<div>\n  <div class="c8y-wizard-nav">\n    <a href="" ng-click="vm.wizardCtrl.goTo(\'menu\')">\n      <i c8y-icon="chevron-left"></i> <span translate>Back</span>\n    </a>\n  </div>\n\n  <div class="c8y-wizard-title">\n    <i c8y-icon="copy"></i> <span translate>Clone application</span>\n  </div>\n\n  <div class="c8y-wizard-list-nav">\n    <a href="" class="list-group-item text-truncate" ng-repeat="app in vm.existingApps | orderBy:\'name | humanizeAppName\'" ng-click="vm.choose(app)">\n      <c8y-app-icon app="app" class="app-icon"></c8y-app-icon>\n      <span ng-bind="app | humanizeAppName"></span>\n    </a>\n  </div>\n\n  <div class="c8y-wizard-footer">\n    <button class="btn btn-default" ng-click="vm.wizardCtrl.dismiss()" translate>Cancel</button>\n  </div>\n</div>\n',n.put("administration_applications/appWizard/appWizardClone1Step.html",a),n.put("/apps/administration/applications/appWizard/appWizardClone1Step.html",a),a='<div>\n  <div class="c8y-wizard-nav">\n    <a href="" ng-click="vm.wizardCtrl.goTo(\'clone1\')">\n      <i c8y-icon="chevron-left"></i> <span translate>Back</span>\n    </a>\n  </div>\n\n  <div class="c8y-wizard-title">\n    <i c8y-icon="copy"></i> <span translate>Clone application</span>\n  </div>\n\n  <div class="c8y-wizard-body">\n    <h4 class="text-center app-title">\n      <c8y-app-icon app="vm.wizardCtrl.data.appClone.srcApp"></c8y-app-icon>\n      <span ng-bind="vm.wizardCtrl.data.appClone.srcApp | humanizeAppName"></span>\n    </h4>\n  </div>\n\n  <form name="appCloneForm" class="c8y-wizard-form">\n    <div>\n      <div class="form-group" ng-class="{\'has-error\': invalid(\'name\')}">\n        <label for="name"><span translate>Name</span> *</label>\n        <input type="text" class="form-control" id="name" name="name" ng-model="vm.wizardCtrl.data.appClone.destApp.name" required ng-maxlength="120" class="form-control" uib-tooltip="{{validationHints(\'name\')}}">\n      </div>\n\n      <div class="form-group" ng-class="{\'has-error\': invalid(\'key\')}">\n        <label for="key"><span translate>Application key</span> *</label>\n        <input type="text" class="form-control" id="key" name="key" ng-model="vm.wizardCtrl.data.appClone.destApp.key" ng-maxlength="120" required uib-tooltip="{{validationHints(\'key\')}}">\n      </div>\n\n      <div class="form-group" ng-class="{\'has-error\': invalid(\'contextPath\')}">\n        <label for="contextPath"><span translate>Path</span> *</label>\n        <div class="input-group">\n          <span class="input-group-addon">{{ctrl.host}}/apps/</span>\n          <input type="text" class="form-control" id="contextPath" name="contextPath" ng-model="vm.wizardCtrl.data.appClone.destApp.contextPath" required ng-maxlentgh="120" uib-tooltip="{{validationHints(\'contextPath\')}}" c8y-application-context-path>\n        </div>\n      </div>\n    </div>\n  </form>\n\n  <div class="c8y-wizard-footer">\n    <button class="btn btn-primary" ng-click="vm.clone()" ng-disabled="appCloneForm.$invalid || vm.cloneInProgress" translate>Clone</button>\n    <button class="btn btn-default" ng-click="vm.wizardCtrl.dismiss()" ng-disabled="vm.cloneInProgress" translate>Cancel</button>\n  </div>\n</div>\n',n.put("administration_applications/appWizard/appWizardClone2Step.html",a),n.put("/apps/administration/applications/appWizard/appWizardClone2Step.html",a),a='<div>\n  <div class="c8y-wizard-nav">\n    <a href="" ng-click="vm.wizardCtrl.goTo(\'menu\')">\n      <i c8y-icon="chevron-left"></i> <span translate>Back</span>\n    </a>\n  </div>\n\n  <div class="c8y-wizard-title">\n    <i c8y-icon="external-link-square"></i> <span translate>External application</span>\n  </div>\n\n  <form name="externalAppForm" class="c8y-wizard-form">\n    <div class="form-group" ng-class="{\'has-error\': vm.invalid(externalAppForm.name)}">\n      <label for="name"><span translate>Name</span> *</label>\n      <input type="text" class="form-control" id="name" name="name" ng-model="vm.wizardCtrl.data.externalApp.name" required ng-maxlength="120" class="form-control" uib-tooltip="{{vm.validationHints(externalAppForm.name)}}">\n    </div>\n\n    <div class="form-group" ng-class="{\'has-error\': vm.invalid(externalAppForm.key)}">\n      <label for="key"><span translate>Application key</span> *</label>\n      <input type="text" class="form-control" id="key" name="key" ng-model="vm.wizardCtrl.data.externalApp.key" ng-maxlength="120" required uib-tooltip="{{vm.validationHints(externalAppForm.key)}}">\n    </div>\n\n    <div class="form-group" ng-class="{\'has-error\': vm.invalid(externalAppForm.externalUrl)}">\n      <label for="externalUrl"><span translate>External URL</span> *</label>\n      <input type="url" id="externalUrl" name="externalUrl" class="form-control" ng-model="vm.wizardCtrl.data.externalApp.externalUrl" required uib-tooltip="{{vm.validationHints(externalAppForm.externalUrl)}}">\n    </div>\n  </form>\n\n  <div class="c8y-wizard-footer">\n    <button class="btn btn-primary" ng-click="vm.save(vm.wizardCtrl.data.externalApp)" ng-disabled="externalAppForm.$invalid" translate>Save</button>\n    <button class="btn btn-default" ng-click="vm.wizardCtrl.dismiss()" translate>Cancel</button>\n  </div>\n</div>\n',n.put("administration_applications/appWizard/appWizardExternalStep.html",a),n.put("/apps/administration/applications/appWizard/appWizardExternalStep.html",a),a='<div>\n  <div class="c8y-wizard-nav">\n    <a href="" ng-click="vm.wizardCtrl.goTo(\'menu\')">\n      <i c8y-icon="chevron-left"></i> <span translate>Back</span>\n    </a>\n  </div>\n\n  <div class="c8y-wizard-title">\n    <i c8y-icon="cloud"></i> <span translate>HTTP(S) proxy</span>\n  </div>\n\n  <form name="httpsProxyForm" class="c8y-wizard-form">\n    <div class="form-group" ng-class="{\'has-error\': vm.invalid(httpsProxyForm.name)}">\n      <label for="name"><span translate>Name</span> *</label>\n      <input type="text" class="form-control" id="name" name="name" ng-model="vm.wizardCtrl.data.proxyApp.name" required ng-maxlength="120" class="form-control" uib-tooltip="{{vm.validationHints(httpsProxyForm.name)}}">\n    </div>\n\n    <div class="form-group" ng-class="{\'has-error\': vm.invalid(httpsProxyForm.key)}">\n      <label for="key"><span translate>Application key</span> *</label>\n      <input type="text" class="form-control" id="key" name="key" ng-model="vm.wizardCtrl.data.proxyApp.key" ng-maxlength="120" required uib-tooltip="{{vm.validationHints(httpsProxyForm.key)}}">\n    </div>\n\n    <div class="form-group" ng-class="{\'has-error\': vm.invalid(httpsProxyForm.contextPath)}">\n      <label for="contextPath"><span translate>Path</span> *</label>\n      <div class="input-group">\n        <span class="input-group-addon">{{vm.host}}/apps/</span>\n        <input type="text" class="form-control" id="contextPath" name="contextPath" ng-model="vm.wizardCtrl.data.proxyApp.contextPath" required ng-maxlentgh="120" uib-tooltip="{{vm.validationHints(httpsProxyForm.contextPath)}}" c8y-application-context-path>\n      </div>\n    </div>\n\n    <div class="form-group" ng-class="{\'has-error\': vm.invalid(httpsProxyForm.resourcesUrl)}">\n      <label for="resourcesUrl"><span translate>Server URL</span> *</label>\n      <input type="url" class="form-control" id="resourcesUrl" name="resourcesUrl" ng-model="vm.wizardCtrl.data.proxyApp.resourcesUrl" required uib-tooltip="{{vm.validationHints(httpsProxyForm.resourcesUrl)}}">\n    </div>\n\n    <div class="form-group" ng-class="{\'has-error\': vm.invalid(httpsProxyForm.resourcesUsername)}">\n      <label for="resourcesUsername"><span translate>Username</span> *</label>\n      <input type="text" class="form-control" id="resourcesUsername" name="resourcesUsername" ng-model="vm.wizardCtrl.data.proxyApp.resourcesUsername" c8y-autocomplete="off" uib-tooltip="{{vm.validationHints(httpsProxyForm.resourcesUsername)}}">\n    </div>\n\n    <div class="form-group" ng-class="{\'has-error\': vm.invalid(httpsProxyForm.resourcesPassword)}">\n      <label for="resourcesPassword"><span translate>Password</span> *</label>\n      <input type="password" class="form-control" id="resourcesPassword" name="resourcesPassword" ng-model="vm.wizardCtrl.data.proxyApp.resourcesPassword" c8y-autocomplete="off" uib-tooltip="{{vm.validationHints(httpsProxyForm.resourcesPassword)}}">\n    </div>\n  </form>\n\n  <div class="c8y-wizard-footer">\n    <button class="btn btn-primary" ng-click="vm.save(vm.wizardCtrl.data.proxyApp)" ng-disabled="httpsProxyForm.$invalid" translate>Save</button>\n    <button class="btn btn-default" ng-click="vm.wizardCtrl.dismiss()" translate>Cancel</button>\n  </div>\n</div>\n',n.put("administration_applications/appWizard/appWizardHttpsProxyStep.html",a),n.put("/apps/administration/applications/appWizard/appWizardHttpsProxyStep.html",a),a='<div>\n  <div class="c8y-wizard-nav">\n    <span translate>Choose method</span>\n  </div>\n\n  <div class="c8y-wizard-title">\n    <i c8y-icon="plus-circle"></i> <span translate>Add application</span>\n  </div>\n\n  <div class="c8y-wizard-list-nav">\n    <a href="" class="list-group-item" ng-repeat="method in vm.methods" ng-click="vm.chooseMethod(method)">\n      <i c8y-icon="{{method.icon}}"></i> <span ng-bind="method.label | translate"></span>\n    </a>\n  </div>\n\n  <div class="c8y-wizard-footer">\n    <button class="btn btn-default" ng-click="vm.wizardCtrl.dismiss()" translate>Cancel</button>\n  </div>\n</div>\n',n.put("administration_applications/appWizard/appWizardMenuStep.html",a),n.put("/apps/administration/applications/appWizard/appWizardMenuStep.html",a),a='<div>\n  <div class="c8y-wizard-nav">\n    <a href="" ng-click="vm.wizardCtrl.goTo(\'menu\')">\n      <i c8y-icon="chevron-left"></i> <span translate>Back</span>\n    </a>\n  </div>\n\n  <div class="c8y-wizard-title">\n    <i c8y-icon="code"></i> <span translate>Create legacy smartapp</span>\n  </div>\n\n  <form name="smartAppForm" class="c8y-wizard-form">\n    <div class="form-group" ng-class="{\'has-error\': vm.invalid(smartAppForm.name)}">\n      <label for="name"><span translate>Name</span> *</label>\n      <input type="text" class="form-control" id="name" name="name" ng-model="vm.wizardCtrl.data.smartApp.name" required ng-maxlength="120" class="form-control" uib-tooltip="{{vm.validationHints(smartAppForm.name)}}">\n    </div>\n\n    <div class="form-group" ng-class="{\'has-error\': vm.invalid(smartAppForm.contextPath)}">\n      <label for="contextPath"><span translate>Path</span> *</label>\n      <div class="input-group">\n        <span class="input-group-addon">{{vm.host}}/apps/</span>\n        <input type="text" class="form-control" id="contextPath" name="contextPath" ng-model="vm.wizardCtrl.data.smartApp.contextPath" required ng-maxlentgh="120" uib-tooltip="{{vm.validationHints(smartAppForm.contextPath)}}" c8y-application-context-path>\n      </div>\n    </div>\n  </form>\n\n  <div class="c8y-wizard-footer">\n    <button class="btn btn-primary" ng-click="vm.create()" ng-disabled="smartAppForm.$invalid" translate>Create</button>\n    <button class="btn btn-default" ng-click="vm.wizardCtrl.dismiss()" translate>Cancel</button>\n  </div>\n</div>\n',n.put("administration_applications/appWizard/appWizardSmartAppStep.html",a),n.put("/apps/administration/applications/appWizard/appWizardSmartAppStep.html",a),a='<div>\n  <div class="c8y-wizard-nav">\n    <span translate>Application created</span>\n  </div>\n\n  <div class="c8y-wizard-title">\n    <i c8y-icon="plus-circle"></i> <span ng-bind="vm.wizardCtrl.data.chosenMethod.label | translate"></span>\n  </div>\n\n  <div class="c8y-wizard-body">\n    <div class="text-center">\n      <i c8y-icon="check-circle-o" class="text-success" style="font-size: 5em"></i>\n      <br/>\n      <span class="text-success" style="font-size: 20pt" translate>Success</span>\n      <br/>\n      <span translate>\n        Application "{{vm.wizardCtrl.data.createdApp | humanizeAppName}}" has been successfully created.\n      </span>\n    </div>\n  </div>\n\n  <div class="c8y-wizard-footer">\n    <button class="btn btn-primary" ng-click="vm.open(vm.wizardCtrl.data.createdApp)">\n      <i c8y-icon="external-link"></i> <span translate>Open</span>\n    </button>\n    <button class="btn btn-default" ng-click="vm.wizardCtrl.close()" translate>Done</button>\n  </div>\n</div>\n',n.put("administration_applications/appWizard/appWizardSuccessStep.html",a),n.put("/apps/administration/applications/appWizard/appWizardSuccessStep.html",a),a='<div>\n  <div class="c8y-wizard-nav">\n    <a href="" ng-click="vm.wizardCtrl.goTo(\'menu\')">\n      <i c8y-icon="chevron-left"></i> <span translate>Back</span>\n    </a>\n  </div>\n\n  <div class="c8y-wizard-title">\n    <i c8y-icon="upload"></i> <span translate>Upload ZIP file</span>\n  </div>\n\n  <div class="c8y-wizard-body">\n    <file-picker files="vm.wizardCtrl.data.appUpload.files" multiple="false" required="true" ng-disabled="vm.processingStatus.inProgress" display-drop-zone="true" drop-zone-label="\'Upload archive\' | translate" processing-status="vm.processingStatus" on-file-selected="vm.createAppAndUploadArchive(vm.wizardCtrl.data.appUpload.files[0])">\n    </file-picker>\n  </div>\n\n  <div class="c8y-wizard-footer">\n    <button class="btn btn-default" ng-click="vm.wizardCtrl.dismiss()" translate>Cancel</button>\n  </div>\n</div>\n',n.put("administration_applications/appWizard/appWizardUploadStep.html",a),n.put("/apps/administration/applications/appWizard/appWizardUploadStep.html",a),a='<c8y-wizard on-dismiss="$dismiss()" on-close="$close()">\n  <steps>\n    <c8y-wizard-step step-id="menu">\n      <app-wizard-menu-step></app-wizard-menu-step>\n    </c8y-wizard-step>\n    <c8y-wizard-step step-id="upload">\n      <app-wizard-upload-step></app-wizard-upload-step>\n    </c8y-wizard-step>\n    <c8y-wizard-step step-id="httpsProxy">\n      <app-wizard-https-proxy-step></app-wizard-https-proxy-step>\n    </c8y-wizard-step>\n    <c8y-wizard-step step-id="external">\n      <app-wizard-external-step></app-wizard-external-step>\n    </c8y-wizard-step>\n    <c8y-wizard-step step-id="clone1">\n      <app-wizard-clone1-step></app-wizard-clone1-step>\n    </c8y-wizard-step>\n    <c8y-wizard-step step-id="clone2">\n      <app-wizard-clone2-step></app-wizard-clone2-step>\n    </c8y-wizard-step>\n    <c8y-wizard-step step-id="smartApp">\n      <app-wizard-smart-app-step></app-wizard-smart-app-step>\n    </c8y-wizard-step>\n    <c8y-wizard-step step-id="success">\n      <app-wizard-success-step></app-wizard-success-step>\n    </c8y-wizard-step>\n  </steps>\n</c8y-wizard>\n',n.put("administration_applications/appWizard/wizard.html",a),n.put("/apps/administration/applications/appWizard/wizard.html",a),a='<div>\n\n  <label style="z-index:0" ng-show="marketApps.length > 0">\n    {{ \'Built-in applications\' | translate }}\n    <i c8y-icon="info-circle" uib-popover="{{\'Applications your tenant is subscribed to\' | translate}}" popover-append-to-body="true" popover-placement="right" popover-trigger="\'mouseenter\'">\n    </i>\n  </label>\n  <ul class="list-group" style="margin-bottom:20px">\n    <li class="list-group-item" ng-repeat="application in marketApps = (applications | filter:{availability:\'MARKET\'} | orderBy:\'name\')">\n        <input type="checkbox" ng-checked="isAccessAllowed(application)" ng-click="toggleAccess(application)" ng-disabled="disabledEdit">\n        {{application | humanizeAppName}}\n    </li>\n  </ul>\n\n  <label ng-show="privateApps.length > 0">\n    {{\'Custom applications\' | translate}}\n\n    <i c8y-icon="info-circle" uib-popover="{{\'Applications owned by your tenant\' | translate}}" popover-append-to-body="true" popover-placement="right" popover-trigger="\'mouseenter\'">\n    </i>\n  </label>\n  <ul class="list-group">\n    <li class="list-group-item" ng-repeat="application in privateApps = (applications | filter:{availability:\'PRIVATE\'} | orderBy:\'name\')">\n        <input type="checkbox" ng-checked="isAccessAllowed(application)" ng-click="toggleAccess(application)" ng-disabled="disabledEdit">\n        {{application | humanizeAppName}}\n    </li>\n  </ul>\n\n</div>\n',n.put("administration_applications/views/applicationAccessEditor.html",a),n.put("/apps/administration/applications/views/applicationAccessEditor.html",a),a='<div class="row">\n  <form name="applicationForm" novalidate class="col-md-8 col-sm-12 col-lg-6">\n    <div class="card">\n      <div class="card-block">\n        <!-- <h3 class="tab-title">Application Properties</h3> -->\n        <div class="row">\n          <div class="col-sm-5">\n            <div class="form-group">\n              <label>{{\'ID\' | translate}}</label>\n              <input type="text" ng-model="application.id" class="disabled form-control" disabled="disabled">\n            </div>\n          </div>\n          <div class="col-sm-7">\n            <div class="form-group" ng-class="{\'has-error\': invalid(\'name\')}">\n              <label>{{\'Name\' | translate}}</label>\n              <input type="text" ng-model="application.name" name="name" required ng-maxlength="120" class="form-control" uib-tooltip="{{validationHints(\'name\')}}">\n            </div>\n          </div>\n        </div>\n\n        <div class="row">\n          <div class="col-sm-5">\n            <div class="form-group" ng-class="{\'has-error\': invalid(\'key\')}">\n              <label>{{\'Application key\' | translate}}</label>\n              <input type="text" name="key" class="form-control" ng-model="application.key" ng-maxlength="120" ng-readonly="application.id" required uib-tooltip="{{validationHints(\'key\')}}">\n            </div>\n          </div>\n\n          <div class="col-sm-7">\n            <div class="form-group">\n              <label>{{\'Type\' | translate}}</label>\n              <div>\n                <div ng-if="application.id">\n                  <p class="form-control-static">\n                    <i c8y-icon="{{icon(application)}}"></i>\n                    <span ng-bind="typeLabel(application) | translate"/>\n                  </p>\n                </div>\n\n                <div class="btn-group" ng-show="isNew">\n                  <button type="button" class="btn btn-default btn-sm" ng-model="application.type" uib-btn-radio="\'HOSTED\'">\n                    <i c8y-icon="cloud"></i>\n                    <span ng-bind="typeLabel(\'HOSTED\') | translate"/>\n                  </button>\n                  <button type="button" class="btn btn-default btn-sm" ng-model="application.type" uib-btn-radio="\'REPOSITORY\'">\n                    <i c8y-icon="bitbucket"></i>\n                    <span ng-bind="typeLabel(\'REPOSITORY\') | translate"/>\n                  </button>\n                  <button type="button" class="btn btn-default btn-sm" ng-model="application.type" uib-btn-radio="\'EXTERNAL\'">\n                    <i c8y-icon="external-link-square"></i>\n                    <span ng-bind="typeLabel(\'EXTERNAL\') | translate"/>\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n\n\n        <div ng-switch="application.type">\n          <div ng-switch-when="HOSTED">\n            <div class="form-group" ng-class="{\'has-error\': invalid(\'contextPath\')}">\n              <label>{{\'Path\' | translate}}</label>\n              <div class="input-group">\n                <span class="input-group-addon">{{host}}/apps/</span>\n                <input type="text" name="contextPath" class="form-control" ng-model="application.contextPath" required ng-readonly="application.id" ng-maxlentgh="120" uib-tooltip="{{validationHints(\'contextPath\')}}">\n              </div>\n            </div>\n\n            <div class="form-group" ng-class="{\'has-error\': invalid(\'resourcesUrl\')}" ng-if="isNew">\n              <label>{{\'Archive\' | translate}}</label>\n              <i c8y-icon="question-circle" uib-tooltip="{{\'Compressed files must have an index.html at root. URLs in the web application can be relative.\' | translate}}"></i>\n              <div class="input-group">\n                <input type="text" readonly="readonly" required class="form-control" ng-model="file.name" placeholder="{{\'Select file\' | translate}}">\n                <span class="input-group-btn">\n                  <button class="btn btn-primary" ng-file-select="onFileSelect($files)">\n                    <span><i c8y-icon="upload"></i></span>\n                  </button>\n                </span>\n              </div>\n            </div>\n          </div>\n\n          <div ng-switch-when="REPOSITORY">\n\n            <div class="form-group" ng-class="{\'has-error\': invalid(\'contextPath\')}">\n              <label>{{\'Path\' | translate}}</label>\n              <div class="input-group">\n                <span class="input-group-addon">{{host}}/apps/</span>\n                <input type="text" name="contextPath" class="form-control" ng-model="application.contextPath" required ng-readonly="application.id" ng-maxlentgh="120" uib-tooltip="{{validationHints(\'contextPath\')}}">\n              </div>\n            </div>\n\n            <div class="form-group" ng-class="{\'has-error\': invalid(\'resourcesUrl\')}">\n              <label>{{\'Server URL\' | translate}}</label>\n              <input type="url" name="resourcesUrl" class="form-control" ng-model="application.resourcesUrl" uib-tooltip="{{validationHints(\'resourcesUrl\')}}" required>\n            </div>\n\n            <div class="form-group">\n              <label translate>Username</label>\n              <input type="text" class="form-control" ng-model="application.resourcesUsername" c8y-autocomplete="off">\n            </div>\n\n            <div class="form-group">\n              <label translate>Password</label>\n              <input type="text" class="form-control" ng-model="application.resourcesPassword" c8y-autocomplete="off">\n            </div>\n\n          </div>\n\n          <div ng-switch-when="EXTERNAL">\n\n            <div class="form-group" ng-class="{\'has-error\': invalid(\'externalUrl\')}">\n              <label>{{\'External URL\' | translate}}</label>\n              <input type="url" name="externalUrl" class="form-control" ng-model="application.externalUrl" required uib-tooltip="{{validationHints(\'externalUrl\')}}">\n            </div>\n\n          </div>\n\n        </div>\n      </div>\n      <div class="card-footer separator">\n        <button class="btn btn-primary btn-form" ng-click="save(application)" ng-show="application" ng-disabled="!application.type || applicationForm.$invalid" translate>\n          Save\n        </button>\n      </div>\n    </div><!-- /.card -->\n  </form>\n</div>\n',
n.put("administration_applications/views/detail.html",a),n.put("/apps/administration/applications/views/detail.html",a),a='<div ng-controller="applicationListCtrl">\n\n  <div class="c8y-toolbar-spacer page-toolbar">\n      <div class="c8y-toolbar navbar navbar-default" c8y-affix>\n\n        <div class="navbar-header">\n          <button type="button" class="navbar-toggle collapsed" ng-click="isPageToolbarExpanded = !isPageToolbarExpanded" aria-expanded="false">\n            <span class="sr-only">Toggle Toolbar</span>\n            <span class="icon-bar"></span>\n            <span class="icon-bar"></span>\n            <span class="icon-bar"></span>\n          </button>\n        </div>\n\n        <div id="page-toolbar" class="navbar-collapse collapse" uib-collapse="!isPageToolbarExpanded" aria-expanded="false" aria-hidden="true" style="height: 0px">\n          <ul class="nav navbar-nav navbar-right">\n            <li><c8y-refresh-btn class="pull-right"></c8y-refresh-btn></li>\n          </ul>\n        </div>\n      </div>\n    </div>\n\n\n    <div class="c8y-empty-state text-center" ng-show="applications.length == 0">\n      <h1 class="c8y-icon c8y-icon-administration c8y-icon-duocolor"></h1>\n      <h3 translate>No applications found.</h3>\n      <p translate>Start by adding your first application.</p>\n      <p><button type="button" class="btn btn-primary" ng-click="addWithWizard()">Add application.</button></p>\n      <p><small><span translate>Find out more on</span> <a href="https://www.cumulocity.com/guides/concepts/applications/" target="_blank" translate>User guide</a>.</small></p>\n    </div>\n\n  <div class="card-group interact-grid">\n    <div class="col-xs-12 col-sm-4 col-md-3 col-lg-2" ng-show="applications.length > 0">\n      <a href="" class="card add-card" ng-click="addWithWizard()">\n        <i c8y-icon="plus-square" class="text-muted"></i><br/>\n        <translate>Add application</translate>\n      </a>\n    </div>\n    <div ng-repeat="app in applications|orderBy:\'name | humanizeAppName\'" class="col-xs-12 col-sm-4 col-md-3 col-lg-2">\n      <div class="card" ng-click="detail(app)">\n\n        <div class="card-actions-group" ng-click="$event.stopPropagation()">\n          <a ng-href="{{getHref(app)}}" target="_blank">\n            <i c8y-icon="external-link"></i>\n            <translate>Open</translate>\n          </a>\n          <!-- TODO: build add plugin sequence (for now it could simply target the plugins tab on the application detail) -->\n          <button ng-if="isManifestApp(app)" ng-click="detailPlugins(app)">\n            <i c8y-icon="plug"></i>\n            <translate>Add plugin</translate>\n          </button>\n        </div>\n\n        <div class="card-block text-center">\n          <h1 style="margin: 15px 0  5px; font-size: 42px"><c8y-app-icon app="app"></c8y-app-icon></h1>\n          <p ng-bind="app | humanizeAppName" style="word-wrap: break-word" class="e2e-appCardName"></p>\n          <p class="text-truncate">\n            <i c8y-icon="{{iconType(app)}}" class="text-muted"></i>\n            <small class="text-muted" ng-bind="path(app)"></small>\n          </p>\n        </div>\n\n        <div class="dropdown card-actions" uib-dropdown ng-click="$event.stopPropagation()">\n          <button type="button" title="{{\'Settings\' | translate}}" class="dropdown-toggle c8y-dropdown" uib-dropdown-toggle>\n            <i c8y-icon="ellipsis-v"></i>\n          </button>\n          <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n            <li>\n              <a href="" ng-click="detail(app)">\n                <i c8y-icon="edit"></i> <translate>Edit</translate>\n               </a>\n            </li>\n            <li ng-if="!isCurrentApp(app)">\n              <a href="" ng-click="onClickDelete(app)">\n                <i c8y-icon="times"></i> <translate>Remove</translate>\n              </a>\n            </li>\n          </ul>\n        </div>\n\n      </div>\n    </div>\n  </div>\n\n  <c8y-load-more></c8y-load-more>\n\n</div>\n',n.put("administration_applications/views/list.html",a),n.put("/apps/administration/applications/views/list.html",a),a='<div ng-controller="appDetailsTitleCtrl as ctrl" class="app-header">\n  <div class="app-name">\n    <c8y-app-icon app="ctrl.app"></c8y-app-icon>\n    <div class="app-title text-truncate">\n      <h1 ng-bind="ctrl.app | humanizeAppName"></h1>\n      <div ng-if="ctrl.clonedFromApp" class="app-subtitle text-muted">\n        <i c8y-icon="copy"></i>\n        <span ng-bind="ctrl.clonedFromApp | humanizeAppName"></span>\n        <i c8y-icon="question-circle" uib-tooltip="{{ctrl.getClonedAppTooltip()}}" tooltip-placement="right"></i>\n      </div>\n    </div>\n  </div>\n</div>\n<!-- TODO: Remove the open and delete buttons and add them in the regular cog dropdown -->\n',n.put("administration_applications/views/title.html",a),n.put("/apps/administration/applications/views/title.html",a)}angular.module("c8y.parts.applications").run(["$templateCache",n])}();