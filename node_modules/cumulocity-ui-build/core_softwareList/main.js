/* core_softwareList 8.7.2 2017-08-02T09:55:30+00:00 e22b35b1d531 (hotfix/8.7.2) tip */
angular.module("c8y.parts.softwareList",[]).config(["c8yNavigatorProvider","$routeProvider","gettext",function(n,t,e){n.addNavigation({parent:e("Management"),name:e("Software repository"),priority:1e3,path:"software",icon:"save"}),t.when("/software",{templateUrl:"core_softwareList/views/index.html"})}]),angular.module("c8y.parts.softwareList").controller("softwareListCtrl",["$scope","c8yInventory","c8yModal","c8yBase","c8yTitle","c8yAlert","gettext","gettextCatalog",function(n,t,e,a,l,r,o,s){"use strict";function i(){l.changeTitle({title:o("Software repository")})}function c(t){n.softwares&&!n.refreshLoading||(n.softwares=[]),n.paging=t.paging,t.forEach(function(t){n.softwares.push(t)})}function d(n){return _.assign({type:x},n||{})}function u(n){var e=d(n);return t.list(e).then(c)}function f(){n.paging.loading=!0,n.paging.next().then(c).finally(function(){n.paging.loading=!1})}function g(){n.refreshLoading=!0,n.paging.refresh().then(c).finally(function(){n.refreshLoading=!1})}function w(n){return k.indexOf(n)}function p(n){return w(n)>-1}function b(n){p(n)?k.splice(w(n),1):k.push(n)}function m(l){e({title:o("Confirm delete?"),body:s.getString('Do you really want to remove software "{{name}}"?',{name:l.name}),status:"danger"}).then(angular.bind(t,t.remove,l)).then(angular.bind(a,a.removeFromList,n.softwares,l)).then(function(){r.success(o("Software successfully removed."))})}function y(e){t.save(v(e)).then(function(){r.success(o("Software successfully added.")),g(),n.newSw=null})}function v(n){return n.url=n.selectedFile.url,delete n.selectedFile,n}function h(){n.newSw={type:x}}function S(){n.newSw=null}var x="c8y_Software",k=[];n.loadNext=f,n.refresh=g,n.toggle=b,n.isOpen=p,n.onClickDelete=m,n.save=y,n.add=h,n.cancelAdd=S,u(),i()}]),function(){"use strict";function n(n){var t;t='<div data-ng-controller="softwareListCtrl">\n\n  <div class="clearfix">\n    <c8y-refresh-btn class="pull-right" style="margin-bottom:20px"></c8y-refresh-btn>\n    <button class="btn btn-link pull-right" data-ng-click="add()">\n        <i c8y-icon="plus"></i> <translate>Add software</translate>\n    </button>\n  </div>\n\n <form role="form" name="newSoftware" class="panel-body" novalidate ng-show="!!newSw.type">\n    <div class="row">\n      <div class="form-group col-lg-4">\n        <label translate>Name</label>\n        <input type="text" class="form-control" ng-model="newSw.name" required>\n      </div>\n      <div class="form-group col-lg-4">\n        <label translate>Version</label>\n        <input type="text" class="form-control" ng-model="newSw.version">\n      </div>\n      <div class="form-group col-lg-4">\n        <label translate>File</label>\n        <c8y-binary-input initial-url="newSw.url" output-file="newSw.selectedFile" allow-free-url-input="true" file-required="true"></c8y-binary-input>\n      </div>\n    </div>\n\n    <button class="btn btn-primary" ng-click="save(newSw)" ng-disabled="newSoftware.$invalid" translate>Save</button>\n    <button class="btn btn-default" ng-click="cancelAdd()" translate>Cancel</button>\n  </form>\n\n  <table class="table">\n    <thead>\n      <tr>\n        <th translate>Name</th>\n        <th translate>Version</th>\n        <th></th>\n      </tr><tr>\n    </tr></thead>\n    <tbody>\n      <tr ng-repeat-start="sw in softwares | orderBy:[\'name\',\'version\']" class="interact" ng-class="{active: isOpen(sw)}">\n        <td ng-click="toggle(sw)" class="word-break">{{sw.name}}</td>\n        <td ng-click="toggle(sw)" class="word-break">{{sw.version}}</td>\n        <td class="text-right">\n          <button class="btn btn-danger btn-xs showOnHover" title="{{\'Delete software\' | translate}}" data-ng-click="onClickDelete(sw)">\n            <i c8y-icon="times"></i>\n          </button>\n        </td>\n      </tr>\n      <tr ng-repeat-end data-ng-if="isOpen(sw)">\n        <td colspan="3">\n          <form name="softwareForm" role="form" class="panel-body">\n            <div class="row">\n              <div class="form-group col-lg-4">\n                <label translate>Name</label>\n                <input type="text" class="form-control" ng-model="sw.name">\n              </div>\n              <div class="form-group col-lg-4">\n                <label translate>Version</label>\n                <input type="text" class="form-control" ng-model="sw.version">\n              </div>\n              <div class="form-group col-lg-4">\n                <label translate>File</label>\n                <c8y-binary-input initial-url="sw.url" output-file="sw.selectedFile" allow-free-url-input="true"></c8y-binary-input>\n              </div>\n            </div>\n\n            <button class="btn btn-primary" ng-click="save(sw)" ng-disabled="softwareForm.$invalid" translate>Save</button>\n            <button class="btn btn-default" ng-click="toggle(sw)" translate>Close</button>\n          </form>\n        </td>\n      </tr>\n    <tbody>\n  </tbody></tbody></table>\n\n  <c8y-load-more></c8y-load-more>\n\n</div>\n',n.put("core_softwareList/views/index.html",t),n.put("/apps/core/softwareList/views/index.html",t)}angular.module("c8y.parts.softwareList").run(["$templateCache",n])}();